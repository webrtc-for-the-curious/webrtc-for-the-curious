<!doctype html><html lang=fa dir=rtl><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="چه چیزی، چرا و چگونه # WebRTC چیست؟ # WebRTC، که اختصاری برای Web Real-Time Communication می باشد، هم یک API و هم یک پروتکل است. پروتکل WebRTC مجموعه ای از قوانین برای دو نماینده WebRTC برای مذاکره دو طرفه و ایمن در زمان بی درنگ است. WebRTC API نیز به توسعه دهنگان اجازه می دهد که از پروتکل WebRTC استفاده کنند. WebRTC API فقط برای زبان جاوا اسکریپت است."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://webrtcforthecurious.com/fa/docs/01-what-why-and-how/"><meta property="og:site_name" content="WebRTC برای کنجکاوها"><meta property="og:title" content="چه چیزی، چرا و چگونه"><meta property="og:description" content="چه چیزی، چرا و چگونه # WebRTC چیست؟ # WebRTC، که اختصاری برای Web Real-Time Communication می باشد، هم یک API و هم یک پروتکل است. پروتکل WebRTC مجموعه ای از قوانین برای دو نماینده WebRTC برای مذاکره دو طرفه و ایمن در زمان بی درنگ است. WebRTC API نیز به توسعه دهنگان اجازه می دهد که از پروتکل WebRTC استفاده کنند. WebRTC API فقط برای زبان جاوا اسکریپت است."><meta property="og:locale" content="fa"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-02-24T19:51:48+08:00"><title>چه چیزی، چرا و چگونه | WebRTC برای کنجکاوها</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=https://webrtcforthecurious.com/fa/docs/01-what-why-and-how/><link rel=alternate hreflang=en href=https://webrtcforthecurious.com/docs/01-what-why-and-how/ title="What, Why and How"><link rel=alternate hreflang=sv href=https://webrtcforthecurious.com/sv/docs/01-what-why-and-how/ title="Vad, varför och hur"><link rel=alternate hreflang=ru href=https://webrtcforthecurious.com/ru/docs/01-what-why-and-how/ title="Что, Зачем и как ?"><link rel=alternate hreflang=zh href=https://webrtcforthecurious.com/zh/docs/01-what-why-and-how/ title=是什么，为什么，如何使用><link rel=alternate hreflang=ja href=https://webrtcforthecurious.com/ja/docs/01-what-why-and-how/ title=何を、なぜ、どのように><link rel=alternate hreflang=fr href=https://webrtcforthecurious.com/fr/docs/01-what-why-and-how/ title="Quoi, Pourquoi et Comment"><link rel=alternate hreflang=id href=https://webrtcforthecurious.com/id/docs/01-what-why-and-how/ title="Apa, Mengapa, dan Bagaimana"><link rel=alternate hreflang=es href=https://webrtcforthecurious.com/es/docs/01-what-why-and-how/ title="¿Qué, Por qué y Cómo?"><link rel=alternate hreflang=tr href=https://webrtcforthecurious.com/tr/docs/01-what-why-and-how/ title="Ne, Neden ve Nasıl"><link rel=alternate hreflang=ko href=https://webrtcforthecurious.com/ko/docs/01-what-why-and-how/ title="무엇, 왜, 어떻게?"><link rel=stylesheet href=/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/fa.search.min.8b42327044e674f28b539739f3740e92d53360646e8ec8ea1c5cd8a5df75f52f.js integrity="sha256-i0IycETmdPKLU5c583QOktUzYGRujsjqHFzYpd919S8=" crossorigin=anonymous></script></head><body dir=rtl><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/fa/><span>WebRTC برای کنجکاوها</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=جستجو aria-label=جستجو maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
Persian</a></label><ul><li><a href=https://webrtcforthecurious.com/docs/01-what-why-and-how/>English</a></li><li><a href=https://webrtcforthecurious.com/ru/docs/01-what-why-and-how/>Русский</a></li><li><a href=https://webrtcforthecurious.com/sv/docs/01-what-why-and-how/>Svenska</a></li><li><a href=https://webrtcforthecurious.com/zh/docs/01-what-why-and-how/>简体中文</a></li><li><a href=https://webrtcforthecurious.com/ja/docs/01-what-why-and-how/>日本語</a></li><li><a href=https://webrtcforthecurious.com/fr/docs/01-what-why-and-how/>Français</a></li><li><a href=https://webrtcforthecurious.com/id/docs/01-what-why-and-how/>Bahasa Indonesia</a></li><li><a href=https://webrtcforthecurious.com/es/docs/01-what-why-and-how/>Español</a></li><li><a href=https://webrtcforthecurious.com/tr/docs/01-what-why-and-how/>Türkçe</a></li><li><a href=https://webrtcforthecurious.com/ko/docs/01-what-why-and-how/>한국어</a></li></ul></li></ul><ul><li><a href=/fa/docs/01-what-why-and-how/ class=active>چه چیزی، چرا و چگونه</a></li><li><a href=/fa/docs/02-signaling/>سیگنالینگ</a></li><li><a href=/fa/docs/03-connecting/>اتصال</a></li><li><a href=/fa/docs/04-securing/>امنیت</a></li><li><a href=/fa/docs/05-real-time-networking/>شبکه بی درنگ</a></li><li><a href=/fa/docs/06-media-communication/>ارتباط رسانه ای</a></li><li><a href=/fa/docs/07-data-communication/>ارتباط داده ای</a></li><li><a href=/fa/docs/08-applied-webrtc/>اعمال کردن WebRTC</a></li><li><a href=/fa/docs/09-debugging/>اشکال زدایی</a></li><li><a href=/fa/docs/11-faq/>پرسش و پاسخ</a></li><li><a href=/fa/docs/12-glossary/>واژه نامه</a></li><li><a href=/fa/docs/13-reference/>Reference</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>چه چیزی، چرا و چگونه</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#webrtc-چیست>WebRTC چیست؟</a></li><li><a href=#چرا-باید-webrtc-را-یاد-بگیرم>چرا باید WebRTC را یاد بگیرم؟</a></li><li><a href=#پروتکل-webrtc-یک-مجموعه-از-دیگر-فناوری-هاست>پروتکل WebRTC یک مجموعه از دیگر فناوری هاست</a><ul><li><a href=#سیگنالینگ-چگونه-همتا-هارایانه-ها-همدیگر-را-در-webrtc-پیدا-می-کنند>سیگنالینگ: چگونه همتا ها(رایانه ها) همدیگر را در WebRTC پیدا می کنند</a></li><li><a href=#اتصالات-و-پیمایش-nat-با-استفاده-از-stunturn>اتصالات و پیمایش NAT با استفاده از STUN/TURN</a></li><li><a href=#ایمن-سازی-لایه-انتقال-با-dtls-و-srtp>ایمن سازی لایه انتقال با DTLS و SRTP</a></li><li><a href=#ارتباط-با-همتایان-از-طریق-rtp-و-sctp>ارتباط با همتایان از طریق RTP و SCTP</a></li></ul></li><li><a href=#webrtc-مجموعه-ای-از-پروتکل-ها>WebRTC، مجموعه ای از پروتکل ها</a></li><li><a href=#webrtc-api-چگونه-کار-می-کند>WebRTC (API) چگونه کار می کند</a><ul><li><a href=#new-rtcpeerconnection><code>new RTCPeerConnection</code></a></li><li><a href=#addtrack><code>addTrack</code></a></li><li><a href=#createdatachannel><code>createDataChannel</code></a></li><li><a href=#createoffer><code>createOffer</code></a></li><li><a href=#setlocaldescription><code>setLocalDescription</code></a></li><li><a href=#setremotedescription><code>setRemoteDescription</code></a></li><li><a href=#addicecandidate><code>addIceCandidate</code></a></li><li><a href=#ontrack><code>ontrack</code></a></li><li><a href=#oniceconnectionstatechange><code>oniceconnectionstatechange</code></a></li><li><a href=#onconnectionstatechange><code>onconnectionstatechange</code></a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><div dir=rtl><h1 id=چه-چیزی-چرا-و-چگونه>چه چیزی، چرا و چگونه
<a class=anchor href=#%da%86%d9%87-%da%86%db%8c%d8%b2%db%8c-%da%86%d8%b1%d8%a7-%d9%88-%da%86%da%af%d9%88%d9%86%d9%87>#</a></h1><h2 id=webrtc-چیست>WebRTC چیست؟
<a class=anchor href=#webrtc-%da%86%db%8c%d8%b3%d8%aa>#</a></h2><p>WebRTC، که اختصاری برای Web Real-Time Communication می باشد، هم یک API و هم یک پروتکل است. پروتکل WebRTC مجموعه ای از قوانین برای دو نماینده WebRTC برای مذاکره دو طرفه و ایمن در زمان بی درنگ است. WebRTC API نیز به توسعه دهنگان اجازه می دهد که از پروتکل WebRTC استفاده کنند. WebRTC API فقط برای زبان جاوا اسکریپت است.</p><p>یک رابطه مشابه بین HTTP و Fetch API وجود دارد. پروتکل WebRTC همانند HTTP و WebRTC API مانند Fetch API است.</p><p>پرونکل WebRTC در API ها و زبان های دیگر علاوه بر جاوا اسکریپت وجود دارد. شما می توانید سرورها و همچنین ابزار های domain-specific را پیدا کنید. همه ی این پیاده سازی ها از پروتکل WebRTC استفاده می کنند بنابراین آن ها می توانند با یکدیگر تعامل داشته باشند.</p><p>پروتکل WebRTC در IETF و در گروه کاری <a href=https://datatracker.ietf.org/wg/rtcweb/documents/>rtcweb</a> نگهداری می شود. WebRTC API نیز در W3C تحت عنوان <a href=https://www.w3.org/TR/webrtc/>webrtc</a> مستند سازی شده است.</p><h2 id=چرا-باید-webrtc-را-یاد-بگیرم>چرا باید WebRTC را یاد بگیرم؟
<a class=anchor href=#%da%86%d8%b1%d8%a7-%d8%a8%d8%a7%db%8c%d8%af-webrtc-%d8%b1%d8%a7-%db%8c%d8%a7%d8%af-%d8%a8%da%af%db%8c%d8%b1%d9%85>#</a></h2><p>این های چیز هایی هستند که WebRTC به شما خواهد داد. این لیست جامع نیست، فقط یک نمونه از چیز هایست که ممکن است در خلال سفر یادگیریتان قدردان آن شوید. اگر تمامی این مباحث را نمی دانید نگران نباشید، این کتاب این ها را در مسیر یادگیری به شما آموزش خواهد داد.</p><ul><li>یک استاندارد باز</li><li>چندین پیاده سازی</li><li>دسترسی در مرورگر ها</li><li>رمزنگاری اجباری</li><li>پیمایش NAT</li><li>فناوری موجود تغییر کاربری داده شده</li><li>کنترل ازدحام</li><li>تاخیری کمتر از یک ثانیه</li></ul><h2 id=پروتکل-webrtc-یک-مجموعه-از-دیگر-فناوری-هاست>پروتکل WebRTC یک مجموعه از دیگر فناوری هاست
<a class=anchor href=#%d9%be%d8%b1%d9%88%d8%aa%da%a9%d9%84-webrtc-%db%8c%da%a9-%d9%85%d8%ac%d9%85%d9%88%d8%b9%d9%87-%d8%a7%d8%b2-%d8%af%db%8c%da%af%d8%b1-%d9%81%d9%86%d8%a7%d9%88%d8%b1%db%8c-%d9%87%d8%a7%d8%b3%d8%aa>#</a></h2><p>این یک عنوان است که به اندازه یک کتاب کامل برای توضیح دادنش وقت می برد. هرچند برای شروع ما این را به چهار بخش تقسیم کرده ایم.</p><ul><li>سیگنالینگ</li><li>اتصال</li><li>امنیت</li><li>برقرای ارتباط</li></ul><p>این چهار گام به ترتیب اجرا می شوند. برای شروع گام بعدی، باید گام قبلی به صورت 100% موفقیت آمیز بوده باشد.</p><p>یک حقیقت عجیب و غریب درباره WebRTC این است که هر گام در حقیقت از چندین پروتکل دیگر ساخته شده است! برای ساخت WebRTC ما خیلی از فناوری های دیگر را با هم پیوند زده ایم. از این رو، WebRTC بیشتر یک ترکیب و پیکربندی از فناوری های به خوبی درک شده است که از اویل دهه ی 2000 دور ما بوده است.</p><p>هر یک از این گام ها یک بخش مختص به خود دارند، اما بسیار مفید است که اول آن ها را در سطح بالاتر درک کنیم. به دلیل این که آن ها به یکدیگر وابسه هستند، این به شما کمک خواهد کرد که وقتی توضیح بیشتری درباره اهداف هر کدام از این گام ها به شما می دهیم درک بهتری داشته باشید.</p><h3 id=سیگنالینگ-چگونه-همتا-هارایانه-ها-همدیگر-را-در-webrtc-پیدا-می-کنند>سیگنالینگ: چگونه همتا ها(رایانه ها) همدیگر را در WebRTC پیدا می کنند
<a class=anchor href=#%d8%b3%db%8c%da%af%d9%86%d8%a7%d9%84%db%8c%d9%86%da%af-%da%86%da%af%d9%88%d9%86%d9%87-%d9%87%d9%85%d8%aa%d8%a7-%d9%87%d8%a7%d8%b1%d8%a7%db%8c%d8%a7%d9%86%d9%87-%d9%87%d8%a7-%d9%87%d9%85%d8%af%db%8c%da%af%d8%b1-%d8%b1%d8%a7-%d8%af%d8%b1-webrtc-%d9%be%db%8c%d8%af%d8%a7-%d9%85%db%8c-%da%a9%d9%86%d9%86%d8%af>#</a></h3><p>زمانی که یک نماینده WebRTC می خواهد شروع می کند، هیچ ایده ای ندارد که با چه کسی قرار است برقراری ارتباط را انجام دهد و با چه چیزی قرار است با آن ها در ارتباط باشد. سیگنالیگ این مسئله را حل کرده است! سیگنالیگ استفاده می شود که تماس را راه‌اندازی کند. بنابراین دو نماینده WebRTC می توانند ارتباط را آغاز کنند.</p><p>سگتالینگ از یک پروتکل موجود به نام SDP (پروتکل توضیح نشست) استفاده می کند. SDP یک پروتکل متن ساده است. هر پیغام SDP از جفت های کلید/مقدار ساخته شده است و شامل یک لیست از &ldquo;بخش های رسانه&rdquo; است. SDP ی جزییات تبادل دو نماینده WebRTC مانند زیر است</p><ul><li>آی پی ها و درگاه های که به داوطلب ها، قابل دسترسی است.</li><li>چه تعداد ویدیو و صدا نماینده می خواهد بفرستد.</li><li>چه کدک ویدیو و صدا هر نماینده پشتیبانی می کند.</li><li>مقادیری که بین اتصال استفاده می شود (<code>uFrag</code>/<code>uPwd</code>).</li><li>مقادیری امنیتی (اثر انگشت گواهینامه امنیتی).</li></ul><p>توجه داشته باشید که سیگنالینگ معمولا وقتی &ldquo;خارج از دسترس است&rdquo; اتفاق می افتد؛ که به این معناست که، برنامه ها غالبا از خود WebRTC برای تبادل پیغام های WebRTC استفاده نمی کنند. از هر معماری مناسب برای ارسال پیام می توان برای انتقال SDP ها بین همتاهای متصل استفاده کرد و بسیاری از برنامه ها از زیرساخت موجود خود (مانند نقاط پایانی REST، اتصالات WebSocket یا پراکسی های احراز هویت) برای تسهیل تبادل آسان SDP ها بین کاربران استفاده می کنند.</p><h3 id=اتصالات-و-پیمایش-nat-با-استفاده-از-stunturn>اتصالات و پیمایش NAT با استفاده از STUN/TURN
<a class=anchor href=#%d8%a7%d8%aa%d8%b5%d8%a7%d9%84%d8%a7%d8%aa-%d9%88-%d9%be%db%8c%d9%85%d8%a7%db%8c%d8%b4-nat-%d8%a8%d8%a7-%d8%a7%d8%b3%d8%aa%d9%81%d8%a7%d8%af%d9%87-%d8%a7%d8%b2-stunturn>#</a></h3><p>دو نماینده WebRTC اکنون جزئیات کافی برای اتصال به یکدیگر را می دانند. سپس WebRTC از یک فناوری دیگر به نام ICE استفاده می کند.</p><p>ICE (Interactive Connectivity Establishment) پروتکلی است که قدمت آن قبل از WebRTC است. ICE امکان برقراری ارتباط بین دو عامل را فراهم می کند. این عوامل می توانند در همان شبکه یا در آن سوی دنیا باشند. ICE راه حلی برای برقراری ارتباط مستقیم بدون سرور مرکزی است.</p><p>جادوی واقعی اینجا &lsquo;NAT Traversal&rsquo; و STUN/TURN سرور است. این دو مفهوم تنها چیزی است که برای برقراری ارتباط با یک عامل ICE در زیرشبکه دیگر نیاز دارید. ما بعداً به بررسی عمیق این موضوعات خواهیم پرداخت.</p><p>هنگامی که ICE با موفقیت وصل شد، WebRTC سپس به ایجاد یک انتقال رمزگذاری شده می‌پردازد. این انتقال برای صدا، تصویر و داده استفاده می شود.</p><h3 id=ایمن-سازی-لایه-انتقال-با-dtls-و-srtp>ایمن سازی لایه انتقال با DTLS و SRTP
<a class=anchor href=#%d8%a7%db%8c%d9%85%d9%86-%d8%b3%d8%a7%d8%b2%db%8c-%d9%84%d8%a7%db%8c%d9%87-%d8%a7%d9%86%d8%aa%d9%82%d8%a7%d9%84-%d8%a8%d8%a7-dtls-%d9%88-srtp>#</a></h3><p>اکنون که ارتباط دو طرفه داریم (از طریق ICE) باید ارتباط امن برقرار کنیم. این کار از طریق دو پروتکل انجام می شود که قدمتی بیش از WebRTC دارند. اولین پروتکل DTLS (امنیت لایه انتقال داده) است که فقط TLS روی UDP است. TLS پروتکل رمزنگاری است که برای ایمن سازی ارتباطات از طریق HTTPS استفاده می شود. پروتکل دوم SRTP (پروتکل امن حمل و نقل بلادرنگ) است.</p><p>ابتدا WebRTC با انجام یک دست دادن(Hand Shaking) DTLS روی اتصال ایجاد شده توسط ICE متصل می شود. برخلاف HTTPS، WebRTC از مرجع مرکزی برای گواهی ها استفاده نمی کند. در عوض، WebRTC فقط ادعا می کند که گواهی مبادله شده از طریق DTLS با اثر انگشت به اشتراک گذاشته شده از طریق سیگنالینگ مطابقت دارد. این اتصال DTLS سپس برای پیام های DataChannel استفاده می شود.</p><p>سپس WebRTC از پروتکل دیگری برای انتقال صدا/تصویر به نام RTP استفاده می کند. ما بسته های RTP خود را با استفاده از SRTP ایمن می کنیم. ما جلسه SRTP خود را با استخراج کلیدها از جلسه DTLS مذاکره شده اولیه ایمن می کنیم. در فصل بعدی، به این بحث خواهیم پرداخت که چرا انتقال رسانه، پروتکل خاص خود را دارد.</p><p>حالا کار ما تمام شد! اکنون ارتباط دو طرفه و ایمن دارید. اگر یک ارتباط پایدار بین نمایندگان WebRTC خود دارید، به این همه پیچیدگی ممکن است نیاز داشته باشید. متأسفانه، دنیای واقعی محدودیت‌هایی برای از دست دادن بسته‌ها و پهنای باند دارد و بخش بعدی درباره نحوه برخورد ما با آن‌ها است.</p><h3 id=ارتباط-با-همتایان-از-طریق-rtp-و-sctp>ارتباط با همتایان از طریق RTP و SCTP
<a class=anchor href=#%d8%a7%d8%b1%d8%aa%d8%a8%d8%a7%d8%b7-%d8%a8%d8%a7-%d9%87%d9%85%d8%aa%d8%a7%db%8c%d8%a7%d9%86-%d8%a7%d8%b2-%d8%b7%d8%b1%db%8c%d9%82-rtp-%d9%88-sctp>#</a></h3><p>ما اکنون دو نماینده WebRTC با ارتباطات دوطرفه ایمن داریم. بیایید ارتباط را شروع کنیم! مجدداً از دو پروتکل از قبل موجود استفاده می کنیم: RTP (پروتکل حمل و نقل بلادرنگ) و SCTP (پروتکل انتقال کنترل جریان). از RTP برای تبادل رسانه های رمزگذاری شده با SRTP و از SCTP برای ارسال و دریافت پیام های DataChannel رمزگذاری شده با DTLS استفاده می کنیم.</p><p>RTP بسیار کوچک است اما آنچه را که برای پیاده‌سازی جریان بلادرنگ نیاز است را فراهم می کند. نکته مهم این است که RTP به توسعه‌دهنده انعطاف‌پذیری می‌دهد، بنابراین آنها می‌توانند تاخیر، از دست دادن و تراکم داده را به دلخواه خود مدیریت کنند. در بخش رسانه بیشتر به این موضوع خواهیم پرداخت.</p><p>پروتکل نهایی در این بخش SCTP است. SCTP اجازه می دهد گزینه های بسیاری برای تحویل پیام ها داشته باشیم. شما می توانید به صورت اختیاری انتخاب کنید که تحویل غیرقابل اعتماد و خارج از سفارش داشته باشید، بنابراین می توانید تاخیر مورد نیاز برای سیستم های بلادرنگ را دریافت کنید.</p><h2 id=webrtc-مجموعه-ای-از-پروتکل-ها>WebRTC، مجموعه ای از پروتکل ها
<a class=anchor href=#webrtc-%d9%85%d8%ac%d9%85%d9%88%d8%b9%d9%87-%d8%a7%db%8c-%d8%a7%d8%b2-%d9%be%d8%b1%d9%88%d8%aa%da%a9%d9%84-%d9%87%d8%a7>#</a></h2><p>WebRTC بسیاری از مشکلات را حل می کند. در ابتدا، این ممکن است حتی بیش از حد مهندسی شده به نظر برسد. نبوغ WebRTC واقعاً وصف نکردنی است. در ابتدا تصور نمی شد که بتواند همه چیز را بهتر حل کند. در عوض، بسیاری از فن‌آوری‌های تک منظوره موجود را در بر گرفت و آنها را با هم ترکیب کرد.</p><p>این به ما این امکان را می دهد که هر قسمت را به صورت جداگانه بررسی و یاد بگیریم بدون اینکه در آنغرق شویم. یک راه خوب برای یادگیری آن این است که &ldquo;WebRTC Agent&rdquo; را در واقع مثل یک ارکستراتور پروتکل های مختلف تجسم کنیم.</p><p><img src=../images/01-webrtc-agent.png alt="WebRTC Agent" title="WebRTC Agent Diagram"></p><h2 id=webrtc-api-چگونه-کار-می-کند>WebRTC (API) چگونه کار می کند
<a class=anchor href=#webrtc-api-%da%86%da%af%d9%88%d9%86%d9%87-%da%a9%d8%a7%d8%b1-%d9%85%db%8c-%da%a9%d9%86%d8%af>#</a></h2><p>این بخش نشان می دهد که چگونه API جاوا اسکریپت به پروتکل نگاشت می شود. این یک نسخه نمایشی گسترده از WebRTC API نیست، بلکه بیشتر برای ایجاد یک مدل ذهنی از نحوه پیوند آن با یکدیگر است.
اگر با هیچکدام آشنا نیستید، اشکالی ندارد. این می تواند یک بخش سرگرم‌کننده برای یادگیری بیشتر برای شما باشد!</p><h3 id=new-rtcpeerconnection><code>new RTCPeerConnection</code>
<a class=anchor href=#new-rtcpeerconnection>#</a></h3><p><code>RTCPeerConnection</code> سطح بالای &ldquo;نشست WebRTC&rdquo; است. این شامل تمام پروتکل های ذکر شده در بالا است. زیرسیستم ها همه تخصیص داده شده اند اما هنوز هیچ اتفاقی نمی افتد.</p><h3 id=addtrack><code>addTrack</code>
<a class=anchor href=#addtrack>#</a></h3><p><code>addTrack</code> یک جریان RTP جدید ایجاد می کند. یک منبع همگام سازی تصادفی (SSRC) برای این جریان ایجاد می شود. سپس این جریان در قسمت توضیحات جلسه ایجاد شده توسط <code>createOffer</code> در یک بخش رسانه قرار خواهد گرفت. هر تماس با <code>addTrack</code> یک بخش رسانه و SSRC جدید ایجاد می کند.</p><p>بلافاصله پس از ایجاد یک جلسه SRTP، این بسته های رسانه ای پس از رمزگذاری با استفاده از SRTP از طریق ICE ارسال می شوند.</p><h3 id=createdatachannel><code>createDataChannel</code>
<a class=anchor href=#createdatachannel>#</a></h3><p><code>createDataChannel</code> در صورت عدم وجود ارتباط SCTP، یک جریان SCTP جدید ایجاد می کند. به طور پیش‌فرض، SCTP فعال نیست، اما تنها زمانی شروع می‌شود که یک طرف درخواست کانال داده را داشته باشد.</p><p>بلافاصله پس از ایجاد یک جلسه DTLS، انجمن SCTP شروع به ارسال بسته ها از طریق ICE و رمزگذاری شده با DTLS می کند.</p><h3 id=createoffer><code>createOffer</code>
<a class=anchor href=#createoffer>#</a></h3><p><code>createOffer</code> یک Session Description از وضعیت محلی ایجاد می کند تا با همتای راه دور به اشتراک گذاشته شود.</p><p>عمل فراخوانی <code>createOffer</code> چیزی را برای همتای محلی تغییر نمی‌دهد.</p><h3 id=setlocaldescription><code>setLocalDescription</code>
<a class=anchor href=#setlocaldescription>#</a></h3><p><code>setLocalDescription</code> هر گونه تغییر درخواستی را انجام می دهد. <code>addTrack</code>، <code>createDataChannel</code> و تماس‌های مشابه همگی تا برقراری این تماس، به تعویق می افتد. <code>setLocalDescription</code> با مقدار ایجاد شده توسط <code>createOffer</code> فراخوانی می شود.</p><p>معمولاً پس از این تماس، پیشنهاد را برای همتای راه دور ارسال می‌کنید و آنها با آن <code>setRemoteDescription</code> را فراخوانی می‌کنند.</p><h3 id=setremotedescription><code>setRemoteDescription</code>
<a class=anchor href=#setremotedescription>#</a></h3><p><code>setRemoteDescription</code> نحوه اطلاع رسانی به نماینده محلی در مورد وضعیت داوطلب ها راه دور است. به این ترتیب عمل &lsquo;سیگنالینگ&rsquo; با API جاوا اسکریپت انجام می شود.</p><p>وقتی <code>setRemoteDescription</code> از هر دو طرف فراخوانی شد، نمایندگان WebRTC اکنون اطلاعات کافی برای شروع ارتباط Peer-To-Peer (P2P) را دارند!</p><h3 id=addicecandidate><code>addIceCandidate</code>
<a class=anchor href=#addicecandidate>#</a></h3><p><code>addIceCandidate</code> به یک نماینده WebRTC اجازه می‌دهد تا هر زمان که بخواهد، نامزدهای ICE راه دور بیشتری را اضافه کند. این ICE Candidate ،API را مستقیماً به زیرسیستم ICE می فرستد و تأثیر بیشتر دیگری بر اتصال WebRTC ندارد.</p><h3 id=ontrack><code>ontrack</code>
<a class=anchor href=#ontrack>#</a></h3><p><code>ontrack</code> یک تابع بازگشتی است که زمانی که بسته RTP از همتای راه دور دریافت می‌شود، فعال می‌شود. بسته‌های دریافتی باید در توضیحات جلسه که به <code>setRemoteDescription</code> ارسال شده بود، تعیین شده باشند.</p><p>WebRTC از SSRC استفاده می‌کند و توابع بازگشتی <code>MediaStream</code> و <code>MediaStreamTrack</code> مرتبط این جزئیات فراخوانی می‌کند.</p><h3 id=oniceconnectionstatechange><code>oniceconnectionstatechange</code>
<a class=anchor href=#oniceconnectionstatechange>#</a></h3><p><code>oniceconnectionstatechange</code> یک تابع بازگشتی است که وضعیت عامل ICE را فراخوانی می‌کند. هنگامی که شما به شبکه متصل هستید یا زمانی که اتصال شما قطع می شود به این ترتیب به شما اطلاع داده می شود.</p><h3 id=onconnectionstatechange><code>onconnectionstatechange</code>
<a class=anchor href=#onconnectionstatechange>#</a></h3><p><code>onconnectionstatechange</code> ترکیبی از ICE Agent و وضعیت عامل DTLS است. این می‌تواند شما را زمانی که ICE و DTLS هر دو با موفقیت تکمیل شدند مطلع کند.</p></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/webrtc-for-the-curious/webrtc-for-the-curious/commit/4106247124e69adde33201040121d636951d6675 title='آخرین بار ویرایش شده توسط Pang | فوریهٔ 24, 2022' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt>
<span>فوریهٔ 24, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/webrtc-for-the-curious/webrtc-for-the-curious/edit/master/content/docs/01-what-why-and-how.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt>
<span>این صفحه را ویرایش کنید</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#webrtc-چیست>WebRTC چیست؟</a></li><li><a href=#چرا-باید-webrtc-را-یاد-بگیرم>چرا باید WebRTC را یاد بگیرم؟</a></li><li><a href=#پروتکل-webrtc-یک-مجموعه-از-دیگر-فناوری-هاست>پروتکل WebRTC یک مجموعه از دیگر فناوری هاست</a><ul><li><a href=#سیگنالینگ-چگونه-همتا-هارایانه-ها-همدیگر-را-در-webrtc-پیدا-می-کنند>سیگنالینگ: چگونه همتا ها(رایانه ها) همدیگر را در WebRTC پیدا می کنند</a></li><li><a href=#اتصالات-و-پیمایش-nat-با-استفاده-از-stunturn>اتصالات و پیمایش NAT با استفاده از STUN/TURN</a></li><li><a href=#ایمن-سازی-لایه-انتقال-با-dtls-و-srtp>ایمن سازی لایه انتقال با DTLS و SRTP</a></li><li><a href=#ارتباط-با-همتایان-از-طریق-rtp-و-sctp>ارتباط با همتایان از طریق RTP و SCTP</a></li></ul></li><li><a href=#webrtc-مجموعه-ای-از-پروتکل-ها>WebRTC، مجموعه ای از پروتکل ها</a></li><li><a href=#webrtc-api-چگونه-کار-می-کند>WebRTC (API) چگونه کار می کند</a><ul><li><a href=#new-rtcpeerconnection><code>new RTCPeerConnection</code></a></li><li><a href=#addtrack><code>addTrack</code></a></li><li><a href=#createdatachannel><code>createDataChannel</code></a></li><li><a href=#createoffer><code>createOffer</code></a></li><li><a href=#setlocaldescription><code>setLocalDescription</code></a></li><li><a href=#setremotedescription><code>setRemoteDescription</code></a></li><li><a href=#addicecandidate><code>addIceCandidate</code></a></li><li><a href=#ontrack><code>ontrack</code></a></li><li><a href=#oniceconnectionstatechange><code>oniceconnectionstatechange</code></a></li><li><a href=#onconnectionstatechange><code>onconnectionstatechange</code></a></li></ul></li></ul></nav></div></aside></main></body></html>