<!doctype html><html lang=ru dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Сетевое взаимодействие в реальном времени # Почему сетевое взаимодействие так важно в коммуникации в реальном времени? # Сети являются ограничивающим фактором в коммуникации в реальном времени. В идеальном мире у нас была бы неограниченная пропускная способность, и пакеты прибывали бы мгновенно. Но это не так. Сети ограничены, и условия могут измениться в любой момент. Измерение и наблюдение сетевых условий также является сложной проблемой. Вы можете получить разное поведение в зависимости от оборудования, программного обеспечения и его конфигурации."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://webrtcforthecurious.com/ru/docs/05-real-time-networking/"><meta property="og:site_name" content="WebRTC для любопытных"><meta property="og:title" content="Сетевое взаимодействие в реальном времени"><meta property="og:description" content="Сетевое взаимодействие в реальном времени # Почему сетевое взаимодействие так важно в коммуникации в реальном времени? # Сети являются ограничивающим фактором в коммуникации в реальном времени. В идеальном мире у нас была бы неограниченная пропускная способность, и пакеты прибывали бы мгновенно. Но это не так. Сети ограничены, и условия могут измениться в любой момент. Измерение и наблюдение сетевых условий также является сложной проблемой. Вы можете получить разное поведение в зависимости от оборудования, программного обеспечения и его конфигурации."><meta property="og:locale" content="ru"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2025-09-13T15:58:02+03:00"><title>Сетевое взаимодействие в реальном времени | WebRTC для любопытных</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=https://webrtcforthecurious.com/ru/docs/05-real-time-networking/><link rel=alternate hreflang=en href=https://webrtcforthecurious.com/docs/05-real-time-networking/ title="Real-time Networking"><link rel=alternate hreflang=sv href=https://webrtcforthecurious.com/sv/docs/05-real-time-networking/ title=Realtidsnätverk><link rel=alternate hreflang=zh href=https://webrtcforthecurious.com/zh/docs/05-real-time-networking/ title=搭建实时网络><link rel=alternate hreflang=ja href=https://webrtcforthecurious.com/ja/docs/05-real-time-networking/ title=リアルタイム・ネットワーキング><link rel=alternate hreflang=fa href=https://webrtcforthecurious.com/fa/docs/05-real-time-networking/ title="شبکه بی درنگ"><link rel=alternate hreflang=fr href=https://webrtcforthecurious.com/fr/docs/05-real-time-networking/ title="Real-time Networking"><link rel=alternate hreflang=id href=https://webrtcforthecurious.com/id/docs/05-real-time-networking/ title="Real-time Networking"><link rel=alternate hreflang=es href=https://webrtcforthecurious.com/es/docs/05-real-time-networking/ title="Redes en Tiempo Real"><link rel=alternate hreflang=tr href=https://webrtcforthecurious.com/tr/docs/05-real-time-networking/ title="Gerçek Zamanlı Ağ İletişimi"><link rel=alternate hreflang=ko href=https://webrtcforthecurious.com/ko/docs/05-real-time-networking/ title="실시간 네트워킹"><link rel=stylesheet href=/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/ru.search.min.6405c2eee678bba77211860cbe0852ac3c3d10eac7c7a2510b23161024e8c31c.js integrity="sha256-ZAXC7uZ4u6dyEYYMvghSrDw9EOrHx6JRCyMWECTowxw=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/ru/><span>WebRTC для любопытных</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Поиск aria-label=Поиск maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
Русский</a></label><ul><li><a href=https://webrtcforthecurious.com/docs/05-real-time-networking/>English</a></li><li><a href=https://webrtcforthecurious.com/sv/docs/05-real-time-networking/>Svenska</a></li><li><a href=https://webrtcforthecurious.com/zh/docs/05-real-time-networking/>简体中文</a></li><li><a href=https://webrtcforthecurious.com/ja/docs/05-real-time-networking/>日本語</a></li><li><a href=https://webrtcforthecurious.com/fa/docs/05-real-time-networking/>Persian</a></li><li><a href=https://webrtcforthecurious.com/fr/docs/05-real-time-networking/>Français</a></li><li><a href=https://webrtcforthecurious.com/id/docs/05-real-time-networking/>Bahasa Indonesia</a></li><li><a href=https://webrtcforthecurious.com/es/docs/05-real-time-networking/>Español</a></li><li><a href=https://webrtcforthecurious.com/tr/docs/05-real-time-networking/>Türkçe</a></li><li><a href=https://webrtcforthecurious.com/ko/docs/05-real-time-networking/>한국어</a></li></ul></li></ul><ul><li><a href=/ru/docs/01-what-why-and-how/>Что, Зачем и Как</a></li><li><a href=/ru/docs/02-signaling/>Сигнализация</a></li><li><a href=/ru/docs/03-connecting/>Подключение</a></li><li><a href=/ru/docs/04-securing/>Защита</a></li><li><a href=/ru/docs/05-real-time-networking/ class=active>Сетевое взаимодействие в реальном времени</a></li><li><a href=/ru/docs/06-media-communication/>Медиа-коммуникация</a></li><li><a href=/ru/docs/07-data-communication/>Коммуникация данных</a></li><li><a href=/ru/docs/08-applied-webrtc/>Прикладной WebRTC</a></li><li><a href=/ru/docs/09-debugging/>Отладка</a></li><li><a href=/ru/docs/10-history-of-webrtc/>История</a></li><li><a href=/ru/docs/11-faq/>Часто задаваемые вопросы</a></li><li><a href=/ru/docs/12-glossary/>Глоссарий</a></li><li><a href=/ru/docs/13-reference/>Справочник</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Сетевое взаимодействие в реальном времени</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#почему-сетевое-взаимодействие-так-важно-в-коммуникации-в-реальном-времени>Почему сетевое взаимодействие так важно в коммуникации в реальном времени?</a></li><li><a href=#какие-атрибуты-сети-делают-ее-сложной>Какие атрибуты сети делают ее сложной?</a><ul><li></li><li><a href=#перегрузка>Перегрузка</a></li><li><a href=#динамичность>Динамичность</a></li></ul></li><li><a href=#решение-проблемы-потери-пакетов>Решение проблемы потери пакетов</a><ul><li><a href=#подтверждения>Подтверждения</a></li><li><a href=#избирательные-подтверждения>Избирательные подтверждения</a></li><li><a href=#отрицательные-подтверждения>Отрицательные подтверждения</a></li><li><a href=#упреждающая-коррекция-ошибок>Упреждающая коррекция ошибок</a></li></ul></li><li><a href=#решение-джиттера>Решение джиттера</a><ul><li><a href=#работа-jitterbuffer>Работа JitterBuffer</a></li></ul></li><li><a href=#обнаружение-перегрузки>Обнаружение перегрузки</a></li><li><a href=#разрешение-перегрузки>Разрешение перегрузки</a><ul><li><a href=#отправка-медленнее>Отправка медленнее</a></li><li><a href=#отправка-меньшего-количества>Отправка меньшего количества</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=сетевое-взаимодействие-в-реальном-времени>Сетевое взаимодействие в реальном времени
<a class=anchor href=#%d1%81%d0%b5%d1%82%d0%b5%d0%b2%d0%be%d0%b5-%d0%b2%d0%b7%d0%b0%d0%b8%d0%bc%d0%be%d0%b4%d0%b5%d0%b9%d1%81%d1%82%d0%b2%d0%b8%d0%b5-%d0%b2-%d1%80%d0%b5%d0%b0%d0%bb%d1%8c%d0%bd%d0%be%d0%bc-%d0%b2%d1%80%d0%b5%d0%bc%d0%b5%d0%bd%d0%b8>#</a></h1><h2 id=почему-сетевое-взаимодействие-так-важно-в-коммуникации-в-реальном-времени>Почему сетевое взаимодействие так важно в коммуникации в реальном времени?
<a class=anchor href=#%d0%bf%d0%be%d1%87%d0%b5%d0%bc%d1%83-%d1%81%d0%b5%d1%82%d0%b5%d0%b2%d0%be%d0%b5-%d0%b2%d0%b7%d0%b0%d0%b8%d0%bc%d0%be%d0%b4%d0%b5%d0%b9%d1%81%d1%82%d0%b2%d0%b8%d0%b5-%d1%82%d0%b0%d0%ba-%d0%b2%d0%b0%d0%b6%d0%bd%d0%be-%d0%b2-%d0%ba%d0%be%d0%bc%d0%bc%d1%83%d0%bd%d0%b8%d0%ba%d0%b0%d1%86%d0%b8%d0%b8-%d0%b2-%d1%80%d0%b5%d0%b0%d0%bb%d1%8c%d0%bd%d0%be%d0%bc-%d0%b2%d1%80%d0%b5%d0%bc%d0%b5%d0%bd%d0%b8>#</a></h2><p>Сети являются ограничивающим фактором в коммуникации в реальном времени. В идеальном мире у нас была бы неограниченная пропускная способность, и пакеты прибывали бы мгновенно. Но это не так. Сети ограничены, и условия могут измениться в любой момент. Измерение и наблюдение сетевых условий также является сложной проблемой. Вы можете получить разное поведение в зависимости от оборудования, программного обеспечения и его конфигурации.</p><p>Коммуникация в реальном времени также создает проблему, которой не существует в большинстве других областей. Для веб-разработчика не фатально, если ваш сайт работает медленнее в некоторых сетях. Пока все данные прибывают, пользователи довольны. С WebRTC, если ваши данные опаздывают, они бесполезны. Никому не интересно, что было сказано в видеоконференции 5 секунд назад. Поэтому при разработке системы связи в реальном времени вам приходится идти на компромисс. Каков ваш временной лимит и сколько данных вы можете отправить?</p><p>Эта глава охватывает концепции, применимые как к передаче данных, так и к медиа-коммуникации. В следующих главах мы выходим за рамки теории и обсуждаем, как подсистемы медиа и данных WebRTC решают эти проблемы.</p><h2 id=какие-атрибуты-сети-делают-ее-сложной>Какие атрибуты сети делают ее сложной?
<a class=anchor href=#%d0%ba%d0%b0%d0%ba%d0%b8%d0%b5-%d0%b0%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%82%d1%8b-%d1%81%d0%b5%d1%82%d0%b8-%d0%b4%d0%b5%d0%bb%d0%b0%d1%8e%d1%82-%d0%b5%d0%b5-%d1%81%d0%bb%d0%be%d0%b6%d0%bd%d0%be%d0%b9>#</a></h2><p>Код, эффективно работающий во всех сетях, сложен. Существует множество различных факторов, и они могут тонко влиять друг на друга. Вот наиболее распространенные проблемы, с которыми столкнутся разработчики.</p><h4 id=пропускная-способность>Пропускная способность
<a class=anchor href=#%d0%bf%d1%80%d0%be%d0%bf%d1%83%d1%81%d0%ba%d0%bd%d0%b0%d1%8f-%d1%81%d0%bf%d0%be%d1%81%d0%be%d0%b1%d0%bd%d0%be%d1%81%d1%82%d1%8c>#</a></h4><p>Пропускная способность - это максимальная скорость передачи данных по заданному маршруту. Важно помнить, что это не статичное число. Пропускная способность будет меняться вдоль маршрута по мере того, как больше (или меньше) людей его использует.</p><h4 id=время-передачи-и-время-круглого-пути>Время передачи и время круглого пути
<a class=anchor href=#%d0%b2%d1%80%d0%b5%d0%bc%d1%8f-%d0%bf%d0%b5%d1%80%d0%b5%d0%b4%d0%b0%d1%87%d0%b8-%d0%b8-%d0%b2%d1%80%d0%b5%d0%bc%d1%8f-%d0%ba%d1%80%d1%83%d0%b3%d0%bb%d0%be%d0%b3%d0%be-%d0%bf%d1%83%d1%82%d0%b8>#</a></h4><p>Время передачи - это время, за которое пакет достигает пункта назначения. Как и пропускная способность, это не константа. Время передачи может колебаться в любой момент.</p><p><code>transmission_time = receive_time - send_time</code></p><p>Чтобы вычислить время передачи, вам нужны синхронизированные с миллисекундной точностью часы на отправителе и получателе. Даже небольшое отклонение приведет к ненадежному измерению времени передачи.
Поскольку WebRTC работает в крайне неоднородных средах, практически невозможно полагаться на идеальную синхронизацию времени между хостами.</p><p>Измерение времени круглого пути - это обходной путь для несовершенной синхронизации часов.</p><p>Вместо работы с распределенными часами WebRTC-пир отправляет специальный пакет со своей собственной меткой времени <code>sendertime1</code>.
Сотрудничающий пир получает пакет и отражает метку времени обратно отправителю.
Как только первоначальный отправитель получает отраженное время, он вычитает метку времени <code>sendertime1</code> из текущего времени <code>sendertime2</code>.
Эта временная дельта называется &ldquo;задержкой распространения круглого пути&rdquo; или, чаще, временем круглого пути.</p><p><code>rtt = sendertime2 - sendertime1</code></p><p>Половина времени круглого пути считается достаточно хорошим приближением времени передачи.
Этот обходной путь не лишен недостатков.
Он предполагает, что на отправку и получение пакетов уходит одинаковое время.
Однако в сотовых сетях операции отправки и получения могут быть не симметричны по времени.
Вы могли заметить, что скорости загрузки на вашем телефоне почти всегда ниже скоростей скачивания.</p><p><code>transmission_time = rtt/2</code></p><p>Технические подробности измерения времени круглого пути описаны более подробно в <a href=../06-media-communication/#receiver-reports--sender-reports>главе о Sender и Receiver Reports RTCP</a>.</p><h4 id=джиттер>Джиттер
<a class=anchor href=#%d0%b4%d0%b6%d0%b8%d1%82%d1%82%d0%b5%d1%80>#</a></h4><p>Джиттер - это факт, что <code>Время передачи</code> может варьироваться для каждого пакета. Ваши пакеты могут быть задержаны, но затем прибыть пачкой.</p><h4 id=потеря-пакетов>Потеря пакетов
<a class=anchor href=#%d0%bf%d0%be%d1%82%d0%b5%d1%80%d1%8f-%d0%bf%d0%b0%d0%ba%d0%b5%d1%82%d0%be%d0%b2>#</a></h4><p>Потеря пакетов - это когда сообщения теряются при передаче. Потеря может быть стабильной или происходить скачкообразно.
Это может быть связано с типом сети, например, спутниковой или Wi-Fi. Или может быть введена программным обеспечением по пути.</p><h4 id=максимальный-блок-передачи>Максимальный блок передачи
<a class=anchor href=#%d0%bc%d0%b0%d0%ba%d1%81%d0%b8%d0%bc%d0%b0%d0%bb%d1%8c%d0%bd%d1%8b%d0%b9-%d0%b1%d0%bb%d0%be%d0%ba-%d0%bf%d0%b5%d1%80%d0%b5%d0%b4%d0%b0%d1%87%d0%b8>#</a></h4><p>Максимальный блок передачи (Maximum Transmission Unit) - это ограничение на размер одного пакета. Сети не позволяют отправлять одно гигантское сообщение. На уровне протокола сообщения могут быть разделены на несколько более мелких пакетов.</p><p>MTU также будет различаться в зависимости от того, какой сетевой путь вы проходите. Вы можете использовать протокол, такой как <a href=https://tools.ietf.org/html/rfc1191>Path MTU Discovery</a>, чтобы определить максимальный размер пакета, который вы можете отправить.</p><h3 id=перегрузка>Перегрузка
<a class=anchor href=#%d0%bf%d0%b5%d1%80%d0%b5%d0%b3%d1%80%d1%83%d0%b7%d0%ba%d0%b0>#</a></h3><p>Перегрузка - это когда достигнуты пределы сети. Обычно это происходит, когда вы достигли пиковой пропускной способности, которую может обработать текущий маршрут. Или это может быть ограничение, наложенное оператором, например, почасовые лимиты, которые настраивает ваш интернет-провайдер.</p><p>Перегрузка проявляется по-разному. Нет стандартизированного поведения. В большинстве случаев при достижении перегрузки сеть будет сбрасывать избыточные пакеты. В других случаях сеть будет буферизовать. Это вызовет увеличение времени передачи для ваших пакетов. Вы также можете увидеть больше джиттера по мере перегрузки сети. Это быстро меняющаяся область, и новые алгоритмы обнаружения перегрузки все еще разрабатываются.</p><h3 id=динамичность>Динамичность
<a class=anchor href=#%d0%b4%d0%b8%d0%bd%d0%b0%d0%bc%d0%b8%d1%87%d0%bd%d0%be%d1%81%d1%82%d1%8c>#</a></h3><p>Сети крайне динамичны, и условия могут быстро меняться. Во время вызова вы можете отправить и получить сотни тысяч пакетов.
Эти пакеты будут проходить через несколько транзитных узлов. Эти узлы будут совместно использоваться миллионами других пользователей. Даже в вашей локальной сети может загружаться HD-фильм или устройство может решить скачать обновление программного обеспечения.</p><p>Хороший вызов - это не просто измерение вашей сети при запуске. Вам нужно постоянно оценивать ситуацию. Вам также нужно справляться со всеми различными поведениями, возникающими из множества сетевого оборудования и программного обеспечения.</p><h2 id=решение-проблемы-потери-пакетов>Решение проблемы потери пакетов
<a class=anchor href=#%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d1%80%d0%be%d0%b1%d0%bb%d0%b5%d0%bc%d1%8b-%d0%bf%d0%be%d1%82%d0%b5%d1%80%d0%b8-%d0%bf%d0%b0%d0%ba%d0%b5%d1%82%d0%be%d0%b2>#</a></h2><p>Обработка потери пакетов - первая проблема для решения. Существует несколько способов ее решения, каждый со своими преимуществами. Это зависит от того, что вы отправляете, и насколько вы терпимы к задержкам. Важно также отметить, что не все потери пакетов фатальны. Потеря некоторого видео может не быть проблемой, человеческий глаз может даже не заметить этого. Потеря текстовых сообщений пользователя фатальна.</p><p>Допустим, вы отправляете 10 пакетов, и пакеты 5 и 6 теряются. Вот способы решения этой проблемы.</p><h3 id=подтверждения>Подтверждения
<a class=anchor href=#%d0%bf%d0%be%d0%b4%d1%82%d0%b2%d0%b5%d1%80%d0%b6%d0%b4%d0%b5%d0%bd%d0%b8%d1%8f>#</a></h3><p>Подтверждения - это когда получатель уведомляет отправителя о каждом полученном пакете. Отправитель узнает о потере пакетов, когда получает подтверждение для пакета дважды, который не является окончательным. Когда отправитель получает <code>ACK</code> для пакета 4 дважды, он знает, что пакет 5 еще не был виден.</p><h3 id=избирательные-подтверждения>Избирательные подтверждения
<a class=anchor href=#%d0%b8%d0%b7%d0%b1%d0%b8%d1%80%d0%b0%d1%82%d0%b5%d0%bb%d1%8c%d0%bd%d1%8b%d0%b5-%d0%bf%d0%be%d0%b4%d1%82%d0%b2%d0%b5%d1%80%d0%b6%d0%b4%d0%b5%d0%bd%d0%b8%d1%8f>#</a></h3><p>Избирательные подтверждения - это улучшение обычных подтверждений. Получатель может отправить <code>SACK</code>, который подтверждает несколько пакетов и уведомляет отправителя о пропусках.
Теперь отправитель может получить <code>SACK</code> для пакетов 4 и 7. Он знает, что ему нужно повторно отправить пакеты 5 и 6.</p><h3 id=отрицательные-подтверждения>Отрицательные подтверждения
<a class=anchor href=#%d0%be%d1%82%d1%80%d0%b8%d1%86%d0%b0%d1%82%d0%b5%d0%bb%d1%8c%d0%bd%d1%8b%d0%b5-%d0%bf%d0%be%d0%b4%d1%82%d0%b2%d0%b5%d1%80%d0%b6%d0%b4%d0%b5%d0%bd%d0%b8%d1%8f>#</a></h3><p>Отрицательные подтверждения решают проблему противоположным образом. Вместо уведомления отправителя о том, что он получил, получатель уведомляет отправителя о том, что было потеряно. В нашем случае <code>NACK</code> будет отправлен для пакетов 5 и 6. Отправитель знает только пакеты, которые получатель хочет, чтобы были отправлены снова.</p><h3 id=упреждающая-коррекция-ошибок>Упреждающая коррекция ошибок
<a class=anchor href=#%d1%83%d0%bf%d1%80%d0%b5%d0%b6%d0%b4%d0%b0%d1%8e%d1%89%d0%b0%d1%8f-%d0%ba%d0%be%d1%80%d1%80%d0%b5%d0%ba%d1%86%d0%b8%d1%8f-%d0%be%d1%88%d0%b8%d0%b1%d0%be%d0%ba>#</a></h3><p>Упреждающая коррекция ошибок исправляет потерю пакетов заблаговременно. Отправитель отправляет избыточные данные, что означает, что потерянный пакет не влияет на конечный поток. Один популярный алгоритм для этого - коррекция ошибок Рида-Соломона.</p><p>Это уменьшает задержку/сложность отправки и обработки подтверждений. Упреждающая коррекция ошибок - это напрасная трата пропускной способности, если в сети, в которой вы находитесь, нет потерь.</p><h2 id=решение-джиттера>Решение джиттера
<a class=anchor href=#%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b4%d0%b6%d0%b8%d1%82%d1%82%d0%b5%d1%80%d0%b0>#</a></h2><p>Джиттер присутствует в большинстве сетей. Даже внутри локальной сети есть много устройств, отправляющих данные с колеблющимися скоростями. Вы легко можете наблюдать джиттер, пингуя другое устройство командой <code>ping</code> и замечая колебания круглого пути задержки.</p><p>Чтобы решить джиттер, клиенты используют JitterBuffer. JitterBuffer обеспечивает стабильное время доставки пакетов. Недостаток заключается в том, что JitterBuffer добавляет некоторую задержку к пакетам, которые прибывают рано. Преимущество в том, что поздние пакеты не вызывают джиттера. Представьте, что во время вызова вы видите следующие времена прибытия пакетов:</p><pre tabindex=0><code>* time=1.46 ms
* time=1.93 ms
* time=1.57 ms
* time=1.55 ms
* time=1.54 ms
* time=1.72 ms
* time=1.45 ms
* time=1.73 ms
* time=1.80 ms
</code></pre><p>В этом случае около 1.8 мс было бы хорошим выбором. Пакеты, прибывающие поздно, будут использовать наш временной интервал задержки. Пакеты, прибывающие рано, будут немного задержаны и могут заполнить окно, истощенное поздними пакетами. Это означает, что мы больше не имеем заторов и обеспечиваем клиенту плавную скорость доставки.</p><h3 id=работа-jitterbuffer>Работа JitterBuffer
<a class=anchor href=#%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%b0-jitterbuffer>#</a></h3><p><img src=../images/05-jitterbuffer.png alt=JitterBuffer title=JitterBuffer></p><p>Каждый пакет добавляется в буфер джиттера сразу после получения.
Как только накопится достаточно пакетов для реконструкции кадра, пакеты, составляющие кадр, освобождаются из буфера и выдаются для декодирования.
Декодер, в свою очередь, декодирует и отрисовывает видеокадр на экране пользователя.
Поскольку буфер джиттера имеет ограниченную емкость, пакеты, которые слишком долго остаются в буфере, будут отброшены.</p><p>Подробнее о том, как видеокадры преобразуются в RTP-пакеты и почему необходима реконструкция, читайте <a href=../06-media-communication/#rtp>в главе о медиа-коммуникации</a>.</p><p><code>jitterBufferDelay</code> предоставляет отличное представление о производительности вашей сети и ее влиянии на плавность воспроизведения.
Это часть <a href=https://www.w3.org/TR/webrtc-stats/#dom-rtcinboundrtpstreamstats-jitterbufferdelay>API статистики WebRTC</a>, относящаяся к входящему потоку получателя.
Задержка определяет время, которое видеокадры проводят в буфере джиттера перед выдачей для декодирования.
Длинная задержка буфера джиттера означает, что ваша сеть сильно перегружена.</p><h2 id=обнаружение-перегрузки>Обнаружение перегрузки
<a class=anchor href=#%d0%be%d0%b1%d0%bd%d0%b0%d1%80%d1%83%d0%b6%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%b5%d1%80%d0%b5%d0%b3%d1%80%d1%83%d0%b7%d0%ba%d0%b8>#</a></h2><p>Прежде чем мы сможем разрешить перегрузку, нам нужно ее обнаружить. Для этого мы используем контроллер перегрузки. Это сложный предмет, который все еще быстро меняется.
Новые алгоритмы все еще публикуются и тестируются. На высоком уровне они все работают одинаково. Контроллер перегрузки предоставляет оценки пропускной способности по некоторым входным данным.
Вот некоторые возможные входные данные:</p><ul><li><strong>Потеря пакетов</strong> - Пакеты сбрасываются по мере перегрузки сети.</li><li><strong>Джиттер</strong> - По мере перегрузки сетевого оборудования, постановка пакетов в очередь вызывает их нерегулярность.</li><li><strong>Время круглого пути</strong> - При перегрузке пакеты дольше прибывают. В отличие от джиттера, время круглого пути просто продолжает увеличиваться.</li><li><strong>Явное уведомление о перегрузке</strong> - Новые сети могут помечать пакеты как подверженные риску сброса для облегчения перегрузки.</li></ul><p>Эти значения необходимо измерять непрерывно во время вызова. Использование сети может увеличиваться или уменьшаться, поэтому доступная пропускная способность может постоянно меняться.</p><h2 id=разрешение-перегрузки>Разрешение перегрузки
<a class=anchor href=#%d1%80%d0%b0%d0%b7%d1%80%d0%b5%d1%88%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%b5%d1%80%d0%b5%d0%b3%d1%80%d1%83%d0%b7%d0%ba%d0%b8>#</a></h2><p>Теперь, когда у нас есть оценка пропускной способности, нам нужно скорректировать то, что мы отправляем. Как мы корректируем, зависит от того, какие данные мы хотим отправить.</p><h3 id=отправка-медленнее>Отправка медленнее
<a class=anchor href=#%d0%be%d1%82%d0%bf%d1%80%d0%b0%d0%b2%d0%ba%d0%b0-%d0%bc%d0%b5%d0%b4%d0%bb%d0%b5%d0%bd%d0%bd%d0%b5%d0%b5>#</a></h3><p>Ограничение скорости, с которой вы отправляете данные, - первое решение для предотвращения перегрузки. Контроллер перегрузки дает вам оценку, и ответственность за ограничение скорости лежит на отправителе.</p><p>Этот метод используется для большинства коммуникаций с данными. С такими протоколами, как TCP, это все делается операционной системой и полностью прозрачно для пользователей и разработчиков.</p><h3 id=отправка-меньшего-количества>Отправка меньшего количества
<a class=anchor href=#%d0%be%d1%82%d0%bf%d1%80%d0%b0%d0%b2%d0%ba%d0%b0-%d0%bc%d0%b5%d0%bd%d1%8c%d1%88%d0%b5%d0%b3%d0%be-%d0%ba%d0%be%d0%bb%d0%b8%d1%87%d0%b5%d1%81%d1%82%d0%b2%d0%b0>#</a></h3><p>В некоторых случаях мы можем отправлять меньше информации, чтобы удовлетворить наши ограничения. У нас также есть жесткие сроки доставки наших данных, поэтому мы не можем отправлять медленнее. Это ограничения, которые относятся к медиа в реальном времени.</p><p>Если у нас недостаточно доступной пропускной способности, мы можем снизить качество отправляемого видео. Это требует тесной обратной связи между вашим видеокодировщиком и контроллером перегрузки.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/webrtc-for-the-curious/webrtc-for-the-curious/commit/b681d97e3677abfc2947fb0eda8ad4b2842029ef title='Последнее изменение от comerc | сентября 13, 2025' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt>
<span>сентября 13, 2025</span></a></div><div><a class="flex align-center" href=https://github.com/webrtc-for-the-curious/webrtc-for-the-curious/edit/master/content/docs/05-real-time-networking.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt>
<span>Редактировать эту страницу</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#почему-сетевое-взаимодействие-так-важно-в-коммуникации-в-реальном-времени>Почему сетевое взаимодействие так важно в коммуникации в реальном времени?</a></li><li><a href=#какие-атрибуты-сети-делают-ее-сложной>Какие атрибуты сети делают ее сложной?</a><ul><li></li><li><a href=#перегрузка>Перегрузка</a></li><li><a href=#динамичность>Динамичность</a></li></ul></li><li><a href=#решение-проблемы-потери-пакетов>Решение проблемы потери пакетов</a><ul><li><a href=#подтверждения>Подтверждения</a></li><li><a href=#избирательные-подтверждения>Избирательные подтверждения</a></li><li><a href=#отрицательные-подтверждения>Отрицательные подтверждения</a></li><li><a href=#упреждающая-коррекция-ошибок>Упреждающая коррекция ошибок</a></li></ul></li><li><a href=#решение-джиттера>Решение джиттера</a><ul><li><a href=#работа-jitterbuffer>Работа JitterBuffer</a></li></ul></li><li><a href=#обнаружение-перегрузки>Обнаружение перегрузки</a></li><li><a href=#разрешение-перегрузки>Разрешение перегрузки</a><ul><li><a href=#отправка-медленнее>Отправка медленнее</a></li><li><a href=#отправка-меньшего-количества>Отправка меньшего количества</a></li></ul></li></ul></nav></div></aside></main></body></html>