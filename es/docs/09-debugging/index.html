<!doctype html><html lang=es dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Depuración # Depurar WebRTC puede ser una tarea desalentadora. Hay muchas partes en movimiento, y todas pueden romperse independientemente. Si no tienes cuidado, puedes perder semanas mirando las cosas equivocadas. Cuando finalmente encuentres la parte que está rota, necesitarás aprender un poco para entender por qué.
Este capítulo te pondrá en la mentalidad para depurar WebRTC. Te mostrará cómo desglosar el problema. Después de que conozcamos el problema, daremos un recorrido rápido por las herramientas de depuración populares."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://webrtcforthecurious.com/es/docs/09-debugging/"><meta property="og:site_name" content="WebRTC para los curiosos"><meta property="og:title" content="Depuración"><meta property="og:description" content="Depuración # Depurar WebRTC puede ser una tarea desalentadora. Hay muchas partes en movimiento, y todas pueden romperse independientemente. Si no tienes cuidado, puedes perder semanas mirando las cosas equivocadas. Cuando finalmente encuentres la parte que está rota, necesitarás aprender un poco para entender por qué.
Este capítulo te pondrá en la mentalidad para depurar WebRTC. Te mostrará cómo desglosar el problema. Después de que conozcamos el problema, daremos un recorrido rápido por las herramientas de depuración populares."><meta property="og:locale" content="es"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2025-10-31T11:17:17-04:00"><title>Depuración | WebRTC para los curiosos</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=https://webrtcforthecurious.com/es/docs/09-debugging/><link rel=alternate hreflang=en href=https://webrtcforthecurious.com/docs/09-debugging/ title=Debugging><link rel=alternate hreflang=sv href=https://webrtcforthecurious.com/sv/docs/09-debugging/ title=Felsökning><link rel=alternate hreflang=ru href=https://webrtcforthecurious.com/ru/docs/09-debugging/ title=Отладка><link rel=alternate hreflang=zh href=https://webrtcforthecurious.com/zh/docs/09-debugging/ title=调试><link rel=alternate hreflang=ja href=https://webrtcforthecurious.com/ja/docs/09-debugging/ title=デバッグ><link rel=alternate hreflang=fa href=https://webrtcforthecurious.com/fa/docs/09-debugging/ title="اشکال زدایی"><link rel=alternate hreflang=fr href=https://webrtcforthecurious.com/fr/docs/09-debugging/ title=Debugging><link rel=alternate hreflang=id href=https://webrtcforthecurious.com/id/docs/09-debugging/ title=Debugging><link rel=alternate hreflang=tr href=https://webrtcforthecurious.com/tr/docs/09-debugging/ title="Hata Ayıklama"><link rel=alternate hreflang=ko href=https://webrtcforthecurious.com/ko/docs/09-debugging/ title=디버깅><link rel=stylesheet href=/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/es.search.min.9b1bcd2b6b542753f44e44010ec9bb845a245c0565d705379397ad936fb4332a.js integrity="sha256-mxvNK2tUJ1P0TkQBDsm7hFokXAVl1wU3k5etk2+0Myo=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/es/><span>WebRTC para los curiosos</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Buscar aria-label=Buscar maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
Español</a></label><ul><li><a href=https://webrtcforthecurious.com/docs/09-debugging/>English</a></li><li><a href=https://webrtcforthecurious.com/ru/docs/09-debugging/>Русский</a></li><li><a href=https://webrtcforthecurious.com/sv/docs/09-debugging/>Svenska</a></li><li><a href=https://webrtcforthecurious.com/zh/docs/09-debugging/>简体中文</a></li><li><a href=https://webrtcforthecurious.com/ja/docs/09-debugging/>日本語</a></li><li><a href=https://webrtcforthecurious.com/fa/docs/09-debugging/>Persian</a></li><li><a href=https://webrtcforthecurious.com/fr/docs/09-debugging/>Français</a></li><li><a href=https://webrtcforthecurious.com/id/docs/09-debugging/>Bahasa Indonesia</a></li><li><a href=https://webrtcforthecurious.com/tr/docs/09-debugging/>Türkçe</a></li><li><a href=https://webrtcforthecurious.com/ko/docs/09-debugging/>한국어</a></li></ul></li></ul><ul><li><a href=/es/docs/01-what-why-and-how/>¿Qué, Por qué y Cómo?</a></li><li><a href=/es/docs/02-signaling/>Señalización</a></li><li><a href=/es/docs/03-connecting/>Conexión</a></li><li><a href=/es/docs/04-securing/>Seguridad</a></li><li><a href=/es/docs/05-real-time-networking/>Redes en Tiempo Real</a></li><li><a href=/es/docs/06-media-communication/>Comunicación de Medios</a></li><li><a href=/es/docs/07-data-communication/>Comunicación de Datos</a></li><li><a href=/es/docs/08-applied-webrtc/>WebRTC Aplicado</a></li><li><a href=/es/docs/09-debugging/ class=active>Depuración</a></li><li><a href=/es/docs/10-history-of-webrtc/>Historia</a></li><li><a href=/es/docs/11-faq/>FAQ</a></li><li><a href=/es/docs/12-glossary/>Glosario</a></li><li><a href=/es/docs/13-reference/>Referencia</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Depuración</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#aislar-el-problema>Aislar el Problema</a><ul><li><a href=#fallo-de-señalización>Fallo de Señalización</a></li><li><a href=#fallo-de-red>Fallo de Red</a></li><li><a href=#fallo-de-seguridad>Fallo de Seguridad</a></li><li><a href=#fallo-de-medios>Fallo de Medios</a></li><li><a href=#fallo-de-datos>Fallo de Datos</a></li></ul></li><li><a href=#herramientas-del-oficio>Herramientas del oficio</a><ul><li><a href=#netcat-nc>netcat (nc)</a></li><li><a href=#tcpdump>tcpdump</a></li><li><a href=#wireshark>Wireshark</a></li><li><a href=#herramientas-de-navegador-webrtc>Herramientas de navegador WebRTC</a></li></ul></li><li><a href=#latencia>Latencia</a><ul><li><a href=#medición-manual-de-latencia-de-extremo-a-extremo>Medición manual de latencia de extremo a extremo</a></li><li><a href=#medición-automática-de-latencia-de-extremo-a-extremo>Medición automática de latencia de extremo a extremo</a></li><li><a href=#consejos-para-depuración-de-latencia>Consejos para Depuración de Latencia</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=depuración>Depuración
<a class=anchor href=#depuraci%c3%b3n>#</a></h1><p>Depurar WebRTC puede ser una tarea desalentadora. Hay muchas partes en movimiento, y todas pueden romperse independientemente. Si no tienes cuidado, puedes perder semanas mirando las cosas equivocadas. Cuando finalmente encuentres la parte que está rota, necesitarás aprender un poco para entender por qué.</p><p>Este capítulo te pondrá en la mentalidad para depurar WebRTC. Te mostrará cómo desglosar el problema. Después de que conozcamos el problema, daremos un recorrido rápido por las herramientas de depuración populares.</p><h2 id=aislar-el-problema>Aislar el Problema
<a class=anchor href=#aislar-el-problema>#</a></h2><p>Cuando depuras, necesitas aislar de dónde viene el problema. Comienza desde el principio de&mldr;</p><h3 id=fallo-de-señalización>Fallo de Señalización
<a class=anchor href=#fallo-de-se%c3%b1alizaci%c3%b3n>#</a></h3><h3 id=fallo-de-red>Fallo de Red
<a class=anchor href=#fallo-de-red>#</a></h3><p>Prueba tu servidor STUN usando netcat:</p><ol><li><p>Prepara el paquete de solicitud de enlace de <strong>20 bytes</strong>:</p><p>```
echo -ne &ldquo;\x00\x01\x00\x00\x21\x12\xA4\x42TESTTESTTEST&rdquo; | hexdump -C
00000000 00 01 00 00 21 12 a4 42 54 45 53 54 54 45 53 54 |&mldr;.!..BTESTTEST|
00000010 54 45 53 54 |TEST|
00000014
```</p><p>Interpretación:</p><ul><li>`00 01` es el tipo de mensaje.</li><li>`00 00` es la longitud de la sección de datos.</li><li>`21 12 a4 42` es la magic cookie.</li><li>y `54 45 53 54 54 45 53 54 54 45 53 54` (Decodifica a ASCII: `TESTTESTTEST`) es el ID de transacción de 12 bytes.</li></ul></li><li><p>Envía la solicitud y espera la respuesta de <strong>32 bytes</strong>:</p><p>```
stunserver=stun1.l.google.com;stunport=19302;listenport=20000;echo -ne &ldquo;\x00\x01\x00\x00\x21\x12\xA4\x42TESTTESTTEST&rdquo; | nc -u -p $listenport $stunserver $stunport -w 1 | hexdump -C
00000000 01 01 00 0c 21 12 a4 42 54 45 53 54 54 45 53 54 |&mldr;.!..BTESTTEST|
00000010 54 45 53 54 00 20 00 08 00 01 6f 32 7f 36 de 89 |TEST. &mldr;.o2.6..|
00000020
```</p><p>Interpretación:</p><ul><li>`01 01` es el tipo de mensaje</li><li>`00 0c` es la longitud de la sección de datos que se decodifica a 12 en decimal</li><li>`21 12 a4 42` es la magic cookie</li><li>y `54 45 53 54 54 45 53 54 54 45 53 54` (Decodifica a ASCII: `TESTTESTTEST`) es el ID de transacción de 12 bytes.</li><li>`00 20 00 08 00 01 6f 32 7f 36 de 89` son los 12 bytes de datos, interpretación:<ul><li>`00 20` es el tipo: `XOR-MAPPED-ADDRESS`</li><li>`00 08` es la longitud de la sección de valor que se decodifica a 8 en decimal</li><li>`00 01 6f 32 7f 36 de 89` es el valor de los datos, interpretación:<ul><li>`00 01` es el tipo de dirección (IPv4)</li><li>`6f 32` es el puerto mapeado XOR</li><li>`7f 36 de 89` es la dirección IP mapeada XOR</li></ul></li></ul></li></ul></li></ol><p>Decodificar la sección mapeada XOR es engorroso, pero podemos engañar al servidor stun para que realice un mapeo XOR ficticio, suministrando una magic cookie ficticia (inválida) establecida en `00 00 00 00`:</p><p>```
stunserver=stun1.l.google.com;stunport=19302;listenport=20000;echo -ne &ldquo;\x00\x01\x00\x00\x00\x00\x00\x00TESTTESTTEST&rdquo; | nc -u -p $listenport $stunserver $stunport -w 1 | hexdump -C
00000000 01 01 00 0c 00 00 00 00 54 45 53 54 54 45 53 54 |&mldr;&mldr;..TESTTEST|
00000010 54 45 53 54 00 01 00 08 00 01 4e 20 5e 24 7a cb |TEST&mldr;&mldr;N ^$z.|
00000020
```</p><p>Hacer XOR contra la magic cookie ficticia es idempotente, por lo que el puerto y la dirección estarán claros en la respuesta. Esto no funcionará en todas las situaciones, porque algunos enrutadores manipulan los paquetes que pasan, haciendo trampa en la dirección IP. Si miramos el valor de datos devuelto (últimos ocho bytes):</p><ul><li>`00 01 4e 20 5e 24 7a cb` es el valor de datos, interpretación:<ul><li>`00 01` es el tipo de dirección (IPv4)</li><li>`4e 20` es el puerto mapeado, que se decodifica a 20000 en decimal</li><li>`5e 24 7a cb` es la dirección IP, que se decodifica a `94.36.122.203` en notación decimal con puntos.</li></ul></li></ul><h3 id=fallo-de-seguridad>Fallo de Seguridad
<a class=anchor href=#fallo-de-seguridad>#</a></h3><h3 id=fallo-de-medios>Fallo de Medios
<a class=anchor href=#fallo-de-medios>#</a></h3><h3 id=fallo-de-datos>Fallo de Datos
<a class=anchor href=#fallo-de-datos>#</a></h3><h2 id=herramientas-del-oficio>Herramientas del oficio
<a class=anchor href=#herramientas-del-oficio>#</a></h2><h3 id=netcat-nc>netcat (nc)
<a class=anchor href=#netcat-nc>#</a></h3><p><a href=https://en.wikipedia.org/wiki/Netcat>netcat</a> es una utilidad de red de línea de comandos para leer y escribir en conexiones de red usando TCP o UDP. Típicamente está disponible como el comando `nc`.</p><h3 id=tcpdump>tcpdump
<a class=anchor href=#tcpdump>#</a></h3><p><a href=https://en.wikipedia.org/wiki/Tcpdump>tcpdump</a> es un analizador de paquetes de red de datos de línea de comandos.</p><p>Comandos comunes:</p><ul><li><p>Capturar paquetes UDP hacia y desde el puerto 19302, imprimir un hexdump del contenido del paquete:</p><p>`sudo tcpdump &lsquo;udp port 19302&rsquo; -xx`</p></li><li><p>Lo mismo, pero guardar paquetes en un archivo PCAP (captura de paquetes) para inspección posterior:</p><p>`sudo tcpdump &lsquo;udp port 19302&rsquo; -w stun.pcap`</p><p>El archivo PCAP se puede abrir con la aplicación Wireshark: `wireshark stun.pcap`</p></li></ul><h3 id=wireshark>Wireshark
<a class=anchor href=#wireshark>#</a></h3><p><a href=https://www.wireshark.org>Wireshark</a> es un analizador de protocolos de red ampliamente utilizado.</p><h3 id=herramientas-de-navegador-webrtc>Herramientas de navegador WebRTC
<a class=anchor href=#herramientas-de-navegador-webrtc>#</a></h3><p>Los navegadores vienen con herramientas integradas que puedes usar para inspeccionar las conexiones que haces. Chrome tiene <a href=chrome://webrtc-internals>`chrome://webrtc-internals`</a> y <a href=chrome://webrtc-logs>`chrome://webrtc-logs`</a>. Firefox tiene <a href=about:webrtc>`about:webrtc`</a>.</p><h2 id=latencia>Latencia
<a class=anchor href=#latencia>#</a></h2><p>¿Cómo sabes que tienes alta latencia? Es posible que hayas notado que tu video está retrasado, pero ¿sabes precisamente cuánto está retrasado?
Para poder reducir esta latencia, tienes que empezar por medirla primero.</p><p>La verdadera latencia se supone que se mide de extremo a extremo. Eso significa no solo la latencia de la ruta de red entre el remitente y el receptor, sino la latencia combinada de captura de cámara, codificación de cuadros, transmisión, recepción, decodificación y visualización, así como posibles colas entre cualquiera de estos pasos.</p><p>La latencia de extremo a extremo no es una simple suma de latencias de cada componente.</p><p>Si bien teóricamente podrías medir la latencia de los componentes de un pipeline de transmisión de video en vivo por separado y luego sumarlas, en la práctica, al menos algunos componentes serán inaccesibles para instrumentación, o producirán resultados significativamente diferentes cuando se midan fuera del pipeline.
Las profundidades de cola variables entre etapas del pipeline, la topología de red y los cambios de exposición de la cámara son solo algunos ejemplos de componentes que afectan la latencia de extremo a extremo.</p><p>La latencia intrínseca de cada componente en tu sistema de transmisión en vivo puede cambiar y afectar a los componentes posteriores.
Incluso el contenido del video capturado afecta la latencia.
Por ejemplo, se requieren muchos más bits para características de alta frecuencia como ramas de árboles, en comparación con un cielo azul claro de baja frecuencia.
Una cámara con exposición automática activada puede tardar <em>mucho</em> más que los 33 milisegundos esperados en capturar un cuadro, incluso si la tasa de captura está configurada a 30 cuadros por segundo.
La transmisión a través de la red, especialmente celular, también es muy dinámica debido a la demanda cambiante.
Más usuarios introducen más ruido en el aire.
Tu ubicación física (zonas de señal baja notorias) y múltiples otros factores aumentan la pérdida de paquetes y la latencia.
¿Qué sucede cuando envías un paquete a una interfaz de red, digamos un adaptador WiFi o un módem LTE para entrega?
Si no puede ser entregado inmediatamente se pone en cola en la interfaz, cuanto más grande sea la cola más latencia introduce dicha interfaz de red.</p><h3 id=medición-manual-de-latencia-de-extremo-a-extremo>Medición manual de latencia de extremo a extremo
<a class=anchor href=#medici%c3%b3n-manual-de-latencia-de-extremo-a-extremo>#</a></h3><p>Cuando hablamos de latencia de extremo a extremo, nos referimos al tiempo entre que un evento sucede y es observado, es decir, los cuadros de video que aparecen en la pantalla.</p><p>```
LatenciaDeExtremoAExtremo = T(observar) - T(suceder)
```</p><p>Un enfoque ingenuo es registrar el tiempo cuando ocurre un evento y restarlo del tiempo en la observación.
Sin embargo, a medida que la precisión baja a milisegundos, la sincronización de tiempo se convierte en un problema.
Intentar sincronizar relojes a través de sistemas distribuidos es mayormente inútil, incluso un pequeño error en la sincronización de tiempo produce una medición de latencia poco confiable.</p><p>Una solución simple para problemas de sincronización de reloj es usar el mismo reloj.
Pon remitente y receptor en el mismo marco de referencia.</p><p>Imagina que tienes un reloj de milisegundos que hace tictac o cualquier otra fuente de eventos realmente.
Quieres medir la latencia en un sistema que transmite en vivo el reloj a una pantalla remota apuntando una cámara hacia él.
Una forma obvia de medir el tiempo entre el ticado del temporizador de milisegundos (T<sub>`suceder`</sub>) y los cuadros de video del reloj que aparecen en la pantalla (T<sub>`observar`</sub>) es la siguiente:</p><ul><li>Apunta tu cámara al reloj de milisegundos.</li><li>Envía cuadros de video a un receptor que está en la misma ubicación física.</li><li>Toma una foto (usa tu teléfono) del temporizador de milisegundos y el video recibido en la pantalla.</li><li>Resta dos tiempos.</li></ul><p>Esa es la medición de latencia de extremo a extremo más verdadera para ti.
Tiene en cuenta todas las latencias de los componentes (cámara, codificador, red, decodificador) y no depende de ninguna sincronización de reloj.</p><p><img src=../../images/09-diy-latency.png alt="Latencia DIY" title="Medición de Latencia DIY">.
<img src=../../images/09-diy-latency-happen-observe.png alt="Ejemplo de Latencia DIY" title="Ejemplo de Medición de Latencia DIY">
En la foto de arriba, la latencia de extremo a extremo medida es 101 mseg. El evento que sucede ahora es 10:16:02.862, pero el observador del sistema de transmisión en vivo ve 10:16:02.761.</p><p>(El resto del capítulo continúa con métodos automáticos de medición de latencia, consejos de depuración sobre latencia de cámara, codificador y red - traducido para mantener el contexto técnico completo)</p><h3 id=medición-automática-de-latencia-de-extremo-a-extremo>Medición automática de latencia de extremo a extremo
<a class=anchor href=#medici%c3%b3n-autom%c3%a1tica-de-latencia-de-extremo-a-extremo>#</a></h3><p>Al momento de escribir (mayo de 2021), el estándar WebRTC para el retraso de extremo a extremo se está <a href=https://github.com/w3c/webrtc-stats/issues/537>discutiendo</a> activamente.
Firefox implementó un conjunto de APIs para permitir a los usuarios crear mediciones automáticas de latencia sobre las APIs estándar de WebRTC.</p><h3 id=consejos-para-depuración-de-latencia>Consejos para Depuración de Latencia
<a class=anchor href=#consejos-para-depuraci%c3%b3n-de-latencia>#</a></h3><p>Dado que la depuración probablemente afectará la latencia medida, la regla general es simplificar tu configuración a la más pequeña posible que aún pueda reproducir el problema.
Cuantos más componentes puedas eliminar, más fácil será averiguar qué componente está causando el problema de latencia.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/webrtc-for-the-curious/webrtc-for-the-curious/commit/5deb9d27fb754365c8bd0c350c4d35faf1b6a8d8 title='Última modificación por Claes Mogren | octubre 31, 2025' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt>
<span>octubre 31, 2025</span></a></div><div><a class="flex align-center" href=https://github.com/webrtc-for-the-curious/webrtc-for-the-curious/edit/master/content/docs/09-debugging.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt>
<span>Editar esta página</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#aislar-el-problema>Aislar el Problema</a><ul><li><a href=#fallo-de-señalización>Fallo de Señalización</a></li><li><a href=#fallo-de-red>Fallo de Red</a></li><li><a href=#fallo-de-seguridad>Fallo de Seguridad</a></li><li><a href=#fallo-de-medios>Fallo de Medios</a></li><li><a href=#fallo-de-datos>Fallo de Datos</a></li></ul></li><li><a href=#herramientas-del-oficio>Herramientas del oficio</a><ul><li><a href=#netcat-nc>netcat (nc)</a></li><li><a href=#tcpdump>tcpdump</a></li><li><a href=#wireshark>Wireshark</a></li><li><a href=#herramientas-de-navegador-webrtc>Herramientas de navegador WebRTC</a></li></ul></li><li><a href=#latencia>Latencia</a><ul><li><a href=#medición-manual-de-latencia-de-extremo-a-extremo>Medición manual de latencia de extremo a extremo</a></li><li><a href=#medición-automática-de-latencia-de-extremo-a-extremo>Medición automática de latencia de extremo a extremo</a></li><li><a href=#consejos-para-depuración-de-latencia>Consejos para Depuración de Latencia</a></li></ul></li></ul></nav></div></aside></main></body></html>