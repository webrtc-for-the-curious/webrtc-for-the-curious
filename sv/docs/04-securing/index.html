<!doctype html><html lang=sv dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Säkerhet # Säkerhet och WebRTC # Varje WebRTC-anslutning är autentiserad och krypterad. Du kan vara säker på att en tredje part inte kan se vad du skickar eller infoga falska meddelanden. Du kan också vara säker på att WebRTC-agenten som genererade sessionsbeskrivningen är den du kommunicerar med.
Det är mycket viktigt att ingen kan modifiera dina meddelanden. Det är ok om en tredje part läser sessionsbeskrivningen under transport. WebRTC har dock inget skydd mot att det ändras."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://webrtcforthecurious.com/sv/docs/04-securing/"><meta property="og:site_name" content="WebRTC för nyfikna"><meta property="og:title" content="Säkerhet"><meta property="og:description" content="Säkerhet # Säkerhet och WebRTC # Varje WebRTC-anslutning är autentiserad och krypterad. Du kan vara säker på att en tredje part inte kan se vad du skickar eller infoga falska meddelanden. Du kan också vara säker på att WebRTC-agenten som genererade sessionsbeskrivningen är den du kommunicerar med.
Det är mycket viktigt att ingen kan modifiera dina meddelanden. Det är ok om en tredje part läser sessionsbeskrivningen under transport. WebRTC har dock inget skydd mot att det ändras."><meta property="og:locale" content="sv"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-02-24T19:51:48+08:00"><title>Säkerhet | WebRTC för nyfikna</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=https://webrtcforthecurious.com/sv/docs/04-securing/><link rel=alternate hreflang=en href=https://webrtcforthecurious.com/docs/04-securing/ title=Securing><link rel=alternate hreflang=ru href=https://webrtcforthecurious.com/ru/docs/04-securing/ title=Securing><link rel=alternate hreflang=zh href=https://webrtcforthecurious.com/zh/docs/04-securing/ title=安全性><link rel=alternate hreflang=ja href=https://webrtcforthecurious.com/ja/docs/04-securing/ title=セキュリティ対策><link rel=alternate hreflang=fa href=https://webrtcforthecurious.com/fa/docs/04-securing/ title=امنیت><link rel=alternate hreflang=fr href=https://webrtcforthecurious.com/fr/docs/04-securing/ title=Securing><link rel=alternate hreflang=id href=https://webrtcforthecurious.com/id/docs/04-securing/ title=Securing><link rel=alternate hreflang=es href=https://webrtcforthecurious.com/es/docs/04-securing/ title=Securing><link rel=alternate hreflang=tr href=https://webrtcforthecurious.com/tr/docs/04-securing/ title=Güvenlik><link rel=alternate hreflang=ko href=https://webrtcforthecurious.com/ko/docs/04-securing/ title=보안><link rel=stylesheet href=/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/sv.search.min.fd90457d4862486103b93b93064dd29dc3b4c5b2333733016b4209da43dcc99b.js integrity="sha256-/ZBFfUhiSGEDuTuTBk3SncO0xbIzNzMBa0IJ2kPcyZs=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/sv/><span>WebRTC för nyfikna</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Sök aria-label=Sök maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
Svenska</a></label><ul><li><a href=https://webrtcforthecurious.com/docs/04-securing/>English</a></li><li><a href=https://webrtcforthecurious.com/ru/docs/04-securing/>Русский</a></li><li><a href=https://webrtcforthecurious.com/zh/docs/04-securing/>简体中文</a></li><li><a href=https://webrtcforthecurious.com/ja/docs/04-securing/>日本語</a></li><li><a href=https://webrtcforthecurious.com/fa/docs/04-securing/>Persian</a></li><li><a href=https://webrtcforthecurious.com/fr/docs/04-securing/>Français</a></li><li><a href=https://webrtcforthecurious.com/id/docs/04-securing/>Bahasa Indonesia</a></li><li><a href=https://webrtcforthecurious.com/es/docs/04-securing/>Español</a></li><li><a href=https://webrtcforthecurious.com/tr/docs/04-securing/>Türkçe</a></li><li><a href=https://webrtcforthecurious.com/ko/docs/04-securing/>한국어</a></li></ul></li></ul><ul><li><a href=/sv/docs/01-what-why-and-how/>Vad, varför och hur</a></li><li><a href=/sv/docs/02-signaling/>Signalering</a></li><li><a href=/sv/docs/03-connecting/>Anslutning</a></li><li><a href=/sv/docs/04-securing/ class=active>Säkerhet</a></li><li><a href=/sv/docs/05-real-time-networking/>Realtidsnätverk</a></li><li><a href=/sv/docs/06-media-communication/>Mediakommunikation</a></li><li><a href=/sv/docs/07-data-communication/>Datakommunikation</a></li><li><a href=/sv/docs/08-applied-webrtc/>Hur WebRTC används</a></li><li><a href=/sv/docs/09-debugging/>Felsökning</a></li><li><a href=/sv/docs/10-history-of-webrtc/>Historia</a></li><li><a href=/sv/docs/11-faq/>FAQ</a></li><li><a href=/sv/docs/12-glossary/>Ordlista</a></li><li><a href=/sv/docs/13-reference/>Referenser</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Säkerhet</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#säkerhet-och-webrtc>Säkerhet och WebRTC</a></li><li><a href=#hur-fungerar-det>Hur fungerar det?</a></li><li><a href=#grundläggande-säkerhet>Grundläggande säkerhet</a><ul><li><a href=#klartext-och-kryptotext>Klartext och Kryptotext</a></li><li><a href=#kryptering>Kryptering</a></li><li><a href=#hashfunktioner>Hashfunktioner</a></li><li><a href=#kryptografi-för-offentlig--privat-nyckel>Kryptografi för offentlig / privat nyckel</a></li><li><a href=#diffiehellmans-nyckelöverföring>Diffie–Hellmans nyckelöverföring</a></li><li><a href=#pseudorandom-funktioner>Pseudorandom-funktioner</a></li><li><a href=#key-derivation-function>Key Derivation Function</a></li><li><a href=#nonce>Nonce</a></li><li><a href=#meddelandeautentiseringskod>Meddelandeautentiseringskod</a></li><li><a href=#nyckelrotation>Nyckelrotation</a></li></ul></li><li><a href=#dtls>DTLS</a><ul><li><a href=#paketformat>Paketformat</a></li><li><a href=#handskakningens-tillstånd>Handskakningens tillstånd</a></li><li><a href=#nyckelgenerering>Nyckelgenerering</a></li><li><a href=#utbyta-applikationsdata>Utbyta applikationsdata</a></li></ul></li><li><a href=#srtp>SRTP</a><ul><li><a href=#sessionsskapande>Sessionsskapande</a></li><li><a href=#utbyta-media>Utbyta media</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=säkerhet>Säkerhet
<a class=anchor href=#s%c3%a4kerhet>#</a></h1><h2 id=säkerhet-och-webrtc>Säkerhet och WebRTC
<a class=anchor href=#s%c3%a4kerhet-och-webrtc>#</a></h2><p>Varje WebRTC-anslutning är autentiserad och krypterad. Du kan vara säker på att en tredje part inte kan se vad du skickar eller infoga falska meddelanden. Du kan också vara säker på att WebRTC-agenten som genererade sessionsbeskrivningen är den du kommunicerar med.</p><p>Det är mycket viktigt att ingen kan modifiera dina meddelanden. Det är ok om en tredje part läser sessionsbeskrivningen under transport. WebRTC har dock inget skydd mot att det ändras. En angripare kan utföra en man-i-mitten-attack genom att ändra ICE-kandidaterna och uppdatera certifikatets fingeravtryck.</p><h2 id=hur-fungerar-det>Hur fungerar det?
<a class=anchor href=#hur-fungerar-det>#</a></h2><p>WebRTC använder två befintliga protokoll, Datagram Transport Layer Security (<a href=https://tools.ietf.org/html/rfc6347>DTLS</a>) och Secure Real-time Transport Protocol (<a href=https://tools.ietf.org/html/rfc3711>SRTP</a>).</p><p>Med DTLS kan du sätta upp en session och sedan utbyta data säkert mellan två parter. Det är ett syskon till TLS, samma teknik som används för HTTPS, men DTLS använder UDP istället för TCP som transportlager. Det betyder att protokollet måste hantera tappade paket. SRTP är speciellt utformat för säkert skicka ljud och bild. Det finns några optimeringar vi kan göra genom att använda det protokollet istället för DTLS.</p><p>DTLS används först. Det gör en handskakning över anslutningen från ICE. DTLS är ett klient/serverprotokoll, så en sida måste starta handskakningen. Klient/serverroller väljs under uppsättningen. Under DTLS-handskakningen erbjuder båda sidor ett certifikat.
När handskakningen är klar jämförs detta certifikat med certifikat-hashen i sessionsbeskrivningen. Detta för att säkerställa att handskakningen gjorts med den WebRTC-agent du förväntade dig. DTLS-anslutningen kan sen användas för vanlig DataChannel-kommunikation.</p><p>För att skapa en SRTP-session initialiserar vi den med hjälp av nycklarna som genereras med DTLS. SRTP har ingen handskakningsmekanism, så vi måste använda nycklar som genererats på något annat sätt. När detta är gjort kan vi skicka media krypterat över SRTP!</p><h2 id=grundläggande-säkerhet>Grundläggande säkerhet
<a class=anchor href=#grundl%c3%a4ggande-s%c3%a4kerhet>#</a></h2><p>För att förstå tekniken som presenteras i detta kapitel finns det några termer som är bra att känna till. Kryptografi är ett knepigt ämne så det kan vara värt att konsultera andra källor också.</p><h3 id=klartext-och-kryptotext>Klartext och Kryptotext
<a class=anchor href=#klartext-och-kryptotext>#</a></h3><p>Klartext är originaltexten man skickar in till ett chiffer. Kryptotext är resultatet av en chiffer.</p><h3 id=kryptering>Kryptering
<a class=anchor href=#kryptering>#</a></h3><p>Ett chiffer är en serie steg som tar vanlig text till kryptotext. Chiffret kan sedan vändas så att du kan ta din kryptotext tillbaka till klartext. Ett chiffer har vanligtvis en nyckel för att ändra sitt beteende. En annan term för detta är kryptering och dekryptering.</p><p>Ett enkelt chiffer är ROT13. Varje bokstav flyttas 13 tecken framåt. För att dekryptera chiffret flyttar du 13 tecken bakåt. Den klara texten <code>HEJSAN</code> skulle bli krypteringstexten <code>URWFNA</code>. I det här fallet är krypteringen ROT och nyckeln är 13.</p><h3 id=hashfunktioner>Hashfunktioner
<a class=anchor href=#hashfunktioner>#</a></h3><p>Hash är en enkelriktad funktion som genererar en kontrollsumma. Från samma meddelande genererar den samma kontrollsumma varje gång. Det är viktigt att funktionen <em>inte</em> är reversibel. Om du har en kontrollsumma ska du inte kunna lista ut meddelandet som den genererades från. Hashing är användbart när du vill bekräfta att ett meddelande inte har manipulerats.</p><p>En enkel hash funktion skulle vara att bara ta varannan bokstav. <code>HEJSAN</code> skulle bli <code>HJA</code>. Du kan inte anta att <code>HEJSAN</code> var ingången, men du kan bekräfta att <code>HEJSAN</code> skulle vara en matcha kontrollsumman.</p><h3 id=kryptografi-för-offentlig--privat-nyckel>Kryptografi för offentlig / privat nyckel
<a class=anchor href=#kryptografi-f%c3%b6r-offentlig--privat-nyckel>#</a></h3><p>Public/Private Key Cryptography beskriver vilken typ av kod som DTLS och SRTP använder. I det här systemet har du två nycklar, en offentlig och en privat nyckel. Den offentliga nyckeln är för kryptering av meddelanden och är säker att dela.
Den privata nyckeln är för dekryptering och ska aldrig delas. Det är den enda nyckeln som kan dekryptera meddelanden som är krypterade med den offentliga nyckeln.</p><h3 id=diffiehellmans-nyckelöverföring>Diffie–Hellmans nyckelöverföring
<a class=anchor href=#diffiehellmans-nyckel%c3%b6verf%c3%b6ring>#</a></h3><p>Diffie–Hellman nyckelöverföring tillåter två användare som aldrig har träffats tidigare att skapa en delad hemlighet säkert över internet. Användaren <code>A</code> kan skicka en hemlighet till användaren <code>B</code> utan att oroa sig för avlyssning. Detta beror på svårigheten att bryta det diskreta logaritmproblemet.
Du behöver inte helt förstå hur det fungerar, men det är bra att veta att det här är tekniken DTLS-handskakningen är baserad på.</p><p>Wikipedia har ett exempel på hur det fungerar <a href=https://sv.wikipedia.org/wiki/Diffie-Hellmans_nyckel%C3%B6verf%C3%B6ring>här</a>.</p><h3 id=pseudorandom-funktioner>Pseudorandom-funktioner
<a class=anchor href=#pseudorandom-funktioner>#</a></h3><p>En Pseudorandom-funktion (PRF) är en fördefinierad funktion för att generera ett värde som verkar slumpmässigt. Det kan ta flera indata och generera en enda utdata.</p><h3 id=key-derivation-function>Key Derivation Function
<a class=anchor href=#key-derivation-function>#</a></h3><p>Key Derivation är en typ av pseudorandom-funktion. Key Derivation är en funktion som används för att göra en nyckel starkare. Ett vanligt sätt är nyckelsträckning (key stretching).</p><p>Låt oss säga att du får en nyckel som är 8 byte. Du kan använda en KDF för att göra den starkare.</p><h3 id=nonce>Nonce
<a class=anchor href=#nonce>#</a></h3><p>En nonce är ytterligare indata till ett chiffer. Detta är så att du kan få olika utdata från krypteringen, även om du krypterar samma meddelande flera gånger.</p><p>Om du krypterar samma meddelande tio gånger kommer krypteringen att ge dig samma kryptotext 10 gånger. Genom att använda ett nonce kan du få olika indata medan du fortfarande använder samma nyckel. Det är viktigt att du använder ett nytt nonce för varje meddelande! Annars ger det ger det inte någon extra säkerhet.</p><h3 id=meddelandeautentiseringskod>Meddelandeautentiseringskod
<a class=anchor href=#meddelandeautentiseringskod>#</a></h3><p>En meddelandeautentiseringskod (Message Authentication Code) är en hash som placeras i slutet av ett meddelande. En MAC visar att meddelandet kommer från den användare du förväntade dig.</p><p>Om du inte använder en MAC kan en angripare infoga ogiltiga meddelanden. Efter dekryptering skulle du bara ha skräp eftersom de inte vet nyckeln.</p><h3 id=nyckelrotation>Nyckelrotation
<a class=anchor href=#nyckelrotation>#</a></h3><p>Nyckelrotation är praxis att byta ut nyckeln med jämna mellanrum. Detta gör att det inte är lika allvarligt att en nyckel blivit stulen. Om en nyckel blir stulen eller har läckt är det mindre data som kan dekrypteras.</p><h2 id=dtls>DTLS
<a class=anchor href=#dtls>#</a></h2><p>DTLS (Datagram Transport Layer Security) tillåter två klienter att etablera säker kommunikation utan någon befintlig konfiguration. Även om någon lyssnar på konversationen kan de inte dekryptera meddelandena.</p><p>För att en DTLS-klient och en server ska kunna kommunicera måste de komma överens om ett chiffer och en nyckel. De bestämmer dessa värden genom att göra ett DTLS-handskakning. Under handskakningen är meddelandena i klartext.
När en DTLS-klient och server har utbytt tillräckligt med information för att börja kryptera skickar den en <code>Change Cipher Spec</code>. Efter detta meddelande kommer varje efterföljande meddelande att vara krypterat!</p><h3 id=paketformat>Paketformat
<a class=anchor href=#paketformat>#</a></h3><p>Varje DTLS-paket börjar med en rubrik.</p><h4 id=innehållstyp>Innehållstyp
<a class=anchor href=#inneh%c3%a5llstyp>#</a></h4><p>Du kan förvänta dig följande typer (Content Type):</p><ul><li><code>20</code> - Ändra krypteringsspecifikation (Change Cipher Spec)</li><li><code>22</code> - Handskakning (Handshake)</li><li><code>23</code> - Applikationsdata (Application Data)</li></ul><p><code>Handskakning</code> används för att utbyta detaljer för att starta sessionen. <code>Ändra krypteringsspecifikation</code> används för att meddela den andra sidan att allt kommer att krypteras. <code>Applikationsdata</code> är de krypterade meddelandena.</p><h4 id=version>Version
<a class=anchor href=#version>#</a></h4><p>Version kan antingen vara <code>0x0000feff</code> (DTLS v1.0) eller <code>0x0000fefd</code> (DTLS v1.2) det finns ingen v1.1.</p><h4 id=epoch>Epoch
<a class=anchor href=#epoch>#</a></h4><p>Epoken börjar vid <code>0</code> men blir <code>1</code> efter en <code>Ändra krypteringsspecifikation</code>. Alla meddelanden med en epok som inte är noll är krypterade.</p><h4 id=sekvensnummer>Sekvensnummer
<a class=anchor href=#sekvensnummer>#</a></h4><p>Sekvensnummer används för att hålla meddelanden i ordning. Varje meddelande ökar sekvensnumret. När epoken ökas börjar sekvensnumret om.</p><h4 id=längd-och-data>Längd och data
<a class=anchor href=#l%c3%a4ngd-och-data>#</a></h4><p>Datan (Payload) som skickas är specifik för varje &ldquo;innehållstyp&rdquo; (<code>Content Type</code>). För en <code>Applikationsdata</code> är det krypterad data. För <code>Handskakning</code> kommer det att vara olika beroende på meddelandet. Längden säger bara hur stor datan är.</p><h3 id=handskakningens-tillstånd>Handskakningens tillstånd
<a class=anchor href=#handskakningens-tillst%c3%a5nd>#</a></h3><p>Under handskakningen utbyter klienten och servern en serie meddelanden. Dessa meddelanden grupperas i stegar. Varje stege kan ha flera meddelanden (eller bara ett).
En stege är inte klar förrän alla meddelanden i stegen har tagits emot. Vi kommer att beskriva syftet med varje meddelande mer detaljerat nedan.</p><p><img src=../../images/04-handshake.png alt=Handskakning title=Handskakning></p><h4 id=clienthello>ClientHello
<a class=anchor href=#clienthello>#</a></h4><p>ClientHello är det första meddelandet som skickas av klienten. Den innehåller en lista med attribut. Dessa attribut berättar för servern vilka chiffer och funktioner som klienten stöder. För WebRTC så väljer vi också SRTP-chiffer med ClientHello. Den innehåller också slumpmässig data som kommer att användas för att generera nycklarna för sessionen.</p><h4 id=helloverifyrequest>HelloVerifyRequest
<a class=anchor href=#helloverifyrequest>#</a></h4><p>HelloVerifyRequest skickas av servern till klienten. Det är för att se till att klienten avsåg att skicka begäran. Klienten skickar sedan ClientHello igen, men med ett token den fick från HelloVerifyRequest:et.</p><h4 id=serverhello>ServerHello
<a class=anchor href=#serverhello>#</a></h4><p>ServerHello är svaret från servern för konfigurationen av sessionen. Den innehåller vilket chiffer som ska användas när den här sessionen är klar. Den innehåller också serverns slumpmässiga data.</p><h4 id=certifikat>Certifikat
<a class=anchor href=#certifikat>#</a></h4><p>Certifikatet (Certificate) innehåller certifikatet för klienten eller servern. Detta används för att unikt identifiera vem vi kommunicerade med. Efter att handskakningen är över ser vi till att detta certifikat när det hashas matchar fingeravtrycket i <code>SessionDescription</code>.</p><h4 id=serverkeyexchangeclientkeyexchange>ServerKeyExchange/ClientKeyExchange
<a class=anchor href=#serverkeyexchangeclientkeyexchange>#</a></h4><p>Dessa meddelanden används för att överföra den offentliga nyckeln. Vid start genererar klienten och servern båda ett knappsats. Efter handskakningen kommer dessa värden att användas för att generera en <code>Pre-Master Secret</code>.</p><h4 id=certificaterequest>CertificateRequest
<a class=anchor href=#certificaterequest>#</a></h4><p>En CertificateRequest skickas av servern som meddelar klienten att den vill ha ett certifikat. Servern kan antingen begära eller kräva ett certifikat.</p><h4 id=serverhellodone>ServerHelloDone
<a class=anchor href=#serverhellodone>#</a></h4><p>ServerHelloDone meddelar klienten att servern är klar med handskakningen.</p><h4 id=certificateverify>CertificateVerify
<a class=anchor href=#certificateverify>#</a></h4><p>CertificateVerify är hur avsändaren visar att den har den privata nyckeln som skickas i certifikatmeddelandet.</p><h4 id=changecipherspec>ChangeCipherSpec
<a class=anchor href=#changecipherspec>#</a></h4><p>ChangeCipherSpec informerar mottagaren om att allt som skickas efter detta meddelande kommer att krypteras.</p><h4 id=färdiga>Färdiga
<a class=anchor href=#f%c3%a4rdiga>#</a></h4><p>Färdig (Finished) är krypterat och innehåller en hash av alla skickade meddelanden. Det används för att verifiera att handskakningen inte har blivit manipulerad.</p><h3 id=nyckelgenerering>Nyckelgenerering
<a class=anchor href=#nyckelgenerering>#</a></h3><p>När handskakningen är klar kan du börja skicka krypterad data. Chiffret valdes av servern och finns i ServerHello. Men hur valdes nyckeln?</p><p>Först genererar vi en <code>Pre-Master Secret</code>. För att göra det värde används Diffie–Hellman på nycklarna som byts via <code>ServerKeyExchange</code> och <code>ClientKeyExchange</code>. Detaljerna varierar beroende på vilket chiffer vi valt.</p><p>Därefter genereras en <code>Master Secret</code>. Varje version av DTLS har en egen pseudorandom-funktion. För DTLS 1.2 tar funktionen <code>Pre-Master Secret</code> och slumpvärdena i <code>ClientHello</code> och <code>ServerHello</code>.
Resultatet från att köra pseudorandom-funktionen är vår <code>Master Secret</code> som används för chiffret.</p><h3 id=utbyta-applikationsdata>Utbyta applikationsdata
<a class=anchor href=#utbyta-applikationsdata>#</a></h3><p>Arbetshästen för DTLS är <code>ApplicationData</code>. Nu när vi har ett initialiserat chiffer kan vi börja kryptera och skicka data.</p><p>Meddelanden med <code>applikationsdata</code> använder den DTLS-header vi beskrev tidigare. Datan är skickas som krypterad text. Du har nu en fungerande DTLS-session och kan kommunicera säkert.</p><p>DTLS har många fler intressanta funktioner som till exempel omförhandling (renegotiation). Men eftersom de inte används i WebRTC hoppar vi över det.</p><h2 id=srtp>SRTP
<a class=anchor href=#srtp>#</a></h2><p>SRTP är ett protokoll utformat speciellt för kryptering av RTP-paket. För att starta en SRTP-session anger du dina nycklar och chiffer. Till skillnad från DTLS har den ingen handskakningsmekanism. All konfiguration och nycklar genererades under DTLS-handskakningen.</p><p>DTLS tillhandahåller ett dedikerat API för att exportera nycklarna som ska användas av en annan process. Detta definieras i <a href=https://tools.ietf.org/html/rfc5705>RFC 5705</a>.</p><h3 id=sessionsskapande>Sessionsskapande
<a class=anchor href=#sessionsskapande>#</a></h3><p>SRTP definierar en Key Derivation-funktion som används på indatat. När du skapar en SRTP-session skickas indatat genom funktionen för att generera nycklar för vår SRTP-kryptering. Efter detta kan du gå vidare till att skicka ljud och bild.</p><h3 id=utbyta-media>Utbyta media
<a class=anchor href=#utbyta-media>#</a></h3><p>Varje RTP-paket har ett 16-bitars sekvensnummer. Dessa sekvensnummer används för att hålla ordning på paket, som en primär nyckel. Under ett samtal kommer numret bli för stort och &ldquo;rulla över&rdquo;. SRTP håller reda på det och kallar detta för övergångsräknare (rollover counter).</p><p>Vid kryptering av ett paket använder SRTP övergångsräknaren och sekvensnumret som ett nonce. Detta för att säkerställa att även om du skickar samma data två gånger kommer krypteringstexten att vara annorlunda. Detta är viktigt för att förhindra att en angripare identifierar mönster eller försöker en uppspelningsattack (replay attack).</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/webrtc-for-the-curious/webrtc-for-the-curious/commit/4106247124e69adde33201040121d636951d6675 title='Senast modifierad av Pang | februari 24, 2022' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt>
<span>februari 24, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/webrtc-for-the-curious/webrtc-for-the-curious/edit/master/content/docs/04-securing.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt>
<span>Redigera denna sida</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#säkerhet-och-webrtc>Säkerhet och WebRTC</a></li><li><a href=#hur-fungerar-det>Hur fungerar det?</a></li><li><a href=#grundläggande-säkerhet>Grundläggande säkerhet</a><ul><li><a href=#klartext-och-kryptotext>Klartext och Kryptotext</a></li><li><a href=#kryptering>Kryptering</a></li><li><a href=#hashfunktioner>Hashfunktioner</a></li><li><a href=#kryptografi-för-offentlig--privat-nyckel>Kryptografi för offentlig / privat nyckel</a></li><li><a href=#diffiehellmans-nyckelöverföring>Diffie–Hellmans nyckelöverföring</a></li><li><a href=#pseudorandom-funktioner>Pseudorandom-funktioner</a></li><li><a href=#key-derivation-function>Key Derivation Function</a></li><li><a href=#nonce>Nonce</a></li><li><a href=#meddelandeautentiseringskod>Meddelandeautentiseringskod</a></li><li><a href=#nyckelrotation>Nyckelrotation</a></li></ul></li><li><a href=#dtls>DTLS</a><ul><li><a href=#paketformat>Paketformat</a></li><li><a href=#handskakningens-tillstånd>Handskakningens tillstånd</a></li><li><a href=#nyckelgenerering>Nyckelgenerering</a></li><li><a href=#utbyta-applikationsdata>Utbyta applikationsdata</a></li></ul></li><li><a href=#srtp>SRTP</a><ul><li><a href=#sessionsskapande>Sessionsskapande</a></li><li><a href=#utbyta-media>Utbyta media</a></li></ul></li></ul></nav></div></aside></main></body></html>